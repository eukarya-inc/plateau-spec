# 6.4.6 データの圧縮

## 6.4.6 データの圧縮

地方公共団体用3D都市モデル成果品フォルダ及びオープンデータ用3D都市モデル成果品フォルダは、各々をZIP形式（拡張子.zip）又は7Z形式（拡張子.7z）に圧縮する。

ファイルの圧縮は、地方公共団体用3D都市モデル成果品フォルダ及びオープンデータ用3D都市モデル成果品フォルダのルートフォルダに対して行う。なお、その内部のいかなるサブフォルダにも圧縮形式のファイルを含んではならない。
圧縮後のファイル名称は、成果品のルートフォルダの名称に一致させる。 

- 地方公共団体用3D都市モデル成果品フォルダの圧縮後のファイル名称：
 `[都市コード]_[都市名英名]_[提供者区分]_[整備年度]_citygml_[更新回数]_[オプション]`
- オープンデータ用3D都市モデル成果品フォルダの圧縮後のファイル名称：
 `[都市コード]_[都市名英名]_[提供者区分]_[整備年度]_citygml_[更新回数]_[オプション]_op`

`[都市コード]`、`[都市名英名]`、`[提供者区分]`、`[整備年度]`、`[更新回数]`及び`[オプション]`の命名規則は、成果品フォルダのルートフォルダの命名規則（6.4.5.2）を参照すること。

例 — 大阪市（市区町村コード：27100、英名：osaka-shi）の3D都市モデルの初回の成果品の圧縮後ファイル名称地方公共団体用3D都市モデル成果品

`27100_osaka-shi_city_2020_citygml_1`

オープンデータ用3D都市モデル成果品

`27100_osaka-shi_city_2020_citygml_1_op`

なお、圧縮後の成果品フォルダのファイルサイズは、上限を160GBとする。

160GBを超える場合は分割する。分割は、成果品と同じフォルダ構成を複数作成し、成果品のファイルを作成したフォルダに振り分けることにより行う。このとき、それぞれの成果品フォルダ内に、同じファイルが重複して存在してはならない。分割する場合、ファイルを振り分けたのち、成果品のフォルダごとに圧縮する。

圧縮後のファイル名称は、
 `[都市コード]_[都市名英名]_[提供者区分]_[整備年度]_citygml_[更新回数]_[オプション]_[分割番号]`
とする。

オープンデータ用の3D都市モデル成果品フォルダの場合、圧縮後のファイル名称は、
 `[都市コード]_[都市名英名]_[提供者区分]_[整備年度]_citygml_[更新回数]_[オプション]_[分割番号]_op`
とする。

`[分割番号]`は、1から始まる連番とする。

図6-6に成果品フォルダを分割した例を示す。この例では、2020年度に整備された大阪市（市区町村コード：`27100`、英名：`osaka-shi`）の3D都市モデルの初回の成果品は、圧縮後のファイルサイズが160GBを超えたため、二つに分けることとした。このとき、成果品と同じフォルダ構成を2セット作成し、1セット目には建物の3D都市モデルのファイルのみを格納し、2セット目にはそれ以外のファイルを全て格納する。圧縮後のファイル名称は、1セット目は、
 `27100_osaka-shi_city_2020_citygml_1_1`
となり、2セット目は、 
 `27100_osaka-shi_city_2020_citygml_1_2`
となる。

![Image](images/toc5_04_06_img001.png)

