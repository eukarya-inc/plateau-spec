# V.2.4 建築物モデルのテクスチャ作成における留意事項

## V.2.4 建築物モデルのテクスチャ作成における留意事項

## V.2.4.1 テクスチャのマージン

テクスチャに用いる画像は、航空測量から取得した画像データのファイルから、対応する面に合わせて切り出した画像データを用いることを推奨する。建築物モデルで定義した面ごとにテクスチャに用いる画像を切り出す際には該当する面より外側の数ピクセル（2ピクセル程度）を含むようマージン（余裕）を設ける。マージン設定のイメージを図V-3に示す。

![Image](images/建築物モデルのテクスチャ作成における留意事項__img001.png)

## V.2.4.2 テクスチャのサイズ制限

テクスチャに用いる画像のサイズは、高さ及び幅の各辺長を2の累乗（8、64、128、256、512、1024、2048ピクセル）とし、2048ピクセル以下とすることを基本とする。ただし、大規模な建築物等では、上限を4096ピクセルとする。なお、高さ及び幅が異なる辺長としてもよい。

テクスチャの解像度は10cm／pixel以下を基本とする。ただし、ユースケースが必要とする場合は10cm／pixel以上の高解像度画像を用いることも可能とするが、高解像画像を広域に用いた場合に描画負荷が大きいことに留意する。

## V.2.4.3 テクスチャのファイル単位

テクスチャの作成に当たっては、描画性能の観点から複数の地物のテクスチャを一つの画像ファイルにまとめること（アトラス化）を推奨する。

アトラス化の範囲は、一つのCityGMLファイルを上限とする。アトラス化後の画像サイズは一辺2048ピクセル以下（辺長サイズは2の累乗）を推奨とし、一辺4096ピクセルを上限とする。ただし、大規模な地物などで、一つの地物でアトラス化をした際にアトラス化後のテクスチャサイズが画像サイズの上限（一辺4096ピクセル）を超える場合は、その地物の画像ファイルを分割してアトラス化してもよい。

複数の地物のテクスチャを一つの画像ファイルにまとめる場合は、地理的に近接した地物単位でまとめる。

## V.2.4.4 アトラス化（テクスチャをまとめる）方法

アトラス化を行う場合は、元画像のテクスチャを回転や拡縮を行わずに規定サイズ内の長方形に詰め込み、テクスチャのUV座標を詰め込み後の画像のUV座標に置き換える手法とする。詰め込みは画像の左隅を起点（左上または左下）とする。

画像の背景色は、黒（R,G,B:0,0,0）とすることを基本とする。ただし、建築物モデルの色調を考慮し、灰色（R,G,B:90,90,90等）を設定してもよい。

