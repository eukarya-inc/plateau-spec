# V.3.3 ポイントクラウドモジュール利用上の留意事項

## V.3.3 ポイントクラウドモジュール利用上の留意事項

- CityGML3.0では、PointCloudモジュールには、三次元点群を記述する方法として、インライン記述、外部ファイル参照の2種類の方法が定義されている。インライン記述では、CityGMLファイル内に直接座標値を記載するため、大規模な三次元点群の場合はファイルの肥大化が起こる。そのため、3D都市モデルにおける三次元点群の記述にあたっては外部ファイル参照の方法を基本とする。 なお、インライン記述を採用する場合は、無制限に大きなCityGMLファイルが作成されないように、標準製品仕様書の7.2.1　(2)ファイルサイズとファイル分割にて、インライン記述の場合はファイル分割が禁止されている。ファイル容量は1GB以内での運用とする。また、インライン記述では、RGB（色情報）やNIR（近赤外線情報）等を持たせられないため、それらを含むデータを連携したい場合は外部ファイル参照を利用する必要がある。
- 三次元点群データは都市オブジェクトと対応づける必要があるため、対応づける都市オブジェクトごとに三次元点群データを抽出する必要がある。抽出の手法として主に下記の手法がある。手法毎のメリットデメリット（表V-1）を確認した上で適切な抽出手法を選択する。都市オブジェクトの幾何形状の正射影による抽出都市オブジェクトの幾何形状の正射影の範囲に含まれる点群のみを抽出する。図V-7 — 都市オブジェクトの幾何形状の正射影による抽出都市オブジェクトの幾何形状の正射影をバッファした範囲による抽出都市オブジェクトの幾何形状の正射影をバッファした範囲に含まれる点群のみを抽出する。図V-8 — 都市オブジェクトの幾何形状の正射影をバッファした範囲による抽出都市オブジェクトの立体的な幾何形状による抽出都市オブジェクトの立体的な幾何形状の範囲に含まれる点群のみを抽出する。図V-9 — 都市オブジェクトの立体的な幾何形状による抽出都市オブジェクトの立体的な幾何形状による抽出都市オブジェクトの立体的な幾何形状の範囲に含まれる点群のみを抽出する。図V-10 — 都市オブジェクトの立体的な幾何形状による抽出点群分類かつ都市オブジェクトの幾何形状の正射影をバッファした範囲による抽出都市オブジェクトの幾何形状の正射影をバッファした範囲に含まれる都市オブジェクトと同一分類の点群のみを抽出する。図V-11 — 点群分類かつ都市オブジェクトの幾何形状の正射影をバッファした範囲による抽出手動による抽出都市オブジェクトと対応する点群を目視で特定し手動で抽出する。

各手法のメリットデメリットについて、表V-1に示す。

**表 V-1 — 点群抽出手法のメリットデメリット**

| 手法 | メリット | デメリット |
| --- | --- | --- |
| 都市オブジェクトの幾何形状の正射影による抽出 | 水平方向の点群の過剰抽出が小整備コストが小 | 水平方向の点群の抽出漏れが大 |
| 都市オブジェクトの幾何形状の正射影をバッファした範囲による抽出 | 水平方向の点群の抽出漏れが小 | 水平方向の点群の過剰抽出が大 |
| 都市オブジェクトの立体的な幾何形状による抽出 | 水平・垂直方向の点群の過剰抽出が小 | 立体的な都市オブジェクトでしか使用できない水平方向の点群の抽出漏れが大 |
| 都市オブジェクトの立体的な幾何形状をバッファした立体による抽出 | 水平・垂直方向の点群の抽出漏れが小 | 立体的な都市オブジェクトでしか使用できない使用する幾何形状のLODによって精度が異なる水平方向の点群の過剰抽出が大 |
| 都市オブジェクトと同一分類の点群かつ都市オブジェクトの立体的な幾何形状をバッファした立体による抽出 | 水平・垂直方向の点群の過剰抽出が小（同じ地物の都市オブジェクトが隣接している場合は過剰抽出の可能性あり）水平・垂直方向の点群の抽出漏れが小 | 点群分類作業が必要 |
| 手動による抽出 | 点群の過剰抽出、抽出漏れが最小 | 整備コストが大 |

