# 附属書M 妥当なトンネルオブジェクト

## 附属書M （規定） 妥当なトンネルオブジェクト

## M.1 概要

本付属書では、「3D都市モデル標準製品仕様書」（以下、「標準製品仕様書」という）に適合したデータ製品について、「トンネルモデル」に従って作成された都市オブジェクト（以下、「トンネルオブジェクト」という）が満たすべき要件と、妥当なトンネルモデルを作成するための標準的な作業手順を示す。

**表 M-1 — M-1: 妥当なトンネルオブジェクト**

| ID | `/req/tun` |
| --- | --- |
| 対象の種類 | 妥当なトンネルオブジェクトの要件 |
| 説明 | トンネルの説明とLODの要件 |
| 規定 | 要件M-1: トンネル記述のLOD対応条件要件M-2: トンネルのLOD0形状定義要件M-3: トンネルのLOD1形状定義要件M-4: tun:TunnelのLOD1形状定義要件M-5: トンネルモデルの上面高さの基準要件M-6: トンネルモデルの底面高さの基準要件M-7: トンネルのLOD2形状定義要件M-8: トンネルモデルのLOD2境界面区分条件要件M-9: トンネルのLOD3形状定義要件M-10: トンネルのLOD4形状定義要件M-11: 境界面のポリゴンの条件要件M-12: tun:TunnelInstallationの空間属性タイプ要件M-13: tun:IntTunnelInstallationの空間属性タイプ要件M-14: tun:TunnelFurnitureの空間属性タイプ要件M-15: tun:_BoundarySurfaceの種類要件M-16: 境界面の幾何オブジェクト参照条件要件M-17: 外壁面と屋根面の区分条件要件M-18: 内壁面と天井面の区分条件 |

## M.2 トンネルの記述とLOD

## M.2.1 トンネルモデル

トンネルとは、上方を含め周辺が地山や他の構造物で覆われている、交通、輸送等に供する構造物である。[道路基盤地図情報（整備促進版）製品仕様書（案）]
標準製品仕様書では、その設置の形態から、ボックスカルバート、シェッド、シェルター及び地下横断歩道もトンネルに含める。

標準製品仕様書では、トンネルの表現に必要な地物型等をCityGML及びi-URから抽出し、LODごとに、含むべき地物型、各地物型の空間属性の型、取得基準、取得方法及び補足を定めた「トンネルモデル」を定義する。

トンネルモデルのLODは、LOD0からLOD4までを対象とする。

![Image](images/tocM_img001.png)

- トンネルモデル（LOD0）は、トンネルの形状を、「公共測量標準図式」に従い、点、線又は面により表現する。
- トンネルモデル（LOD1）は、トンネルの上方からの正射影の外周を一律の高さで上向きに押し上げた立体（箱モデル）により表現する。
- トンネルモデル（LOD2）では、トンネルの形状を立体により表現し、立体を構成する各境界面を地物として取得する。
- トンネルモデル（LOD3）では、トンネルの形状を立体により表現し、立体を構成する各境界面を地物として取得するとともに、トンネルの開口部やトンネルの外側に付いている付属物を地物として取得する。
- トンネルモデル（LOD4）では、トンネルモデル（LOD3）による外形に加えて、トンネル内部の形状を立体により表現する。

## M.2.2 使用可能な地物型とLOD

トンネルモデルは、LODごとに、使用すべき地物型やその空間属性が異なる。

**表 M-2 — M-1: トンネル記述のLOD対応条件**

| ID | `/req/tun/1` |
| --- | --- |
| 主題 | 妥当なトンネルデータセットの要件 |
| 分類 | 要件分類M-1: 妥当なトンネルオブジェクト |
| 条文 | トンネルの記述には、指定されたLODに対応する地物型及び空間属性を使用する。 |

トンネルは、CityGMLのTunnelモジュールに定義されたtun:Tunnelを用いて記述する。

- トンネルモデル（LOD0）では、tun:Tunnelのみを使用し、トンネルの坑口の形状を点、線又は面として表現する。CityGMLにはトンネルのLOD0の空間属性が定義されていないため、i-URにおいて拡張した属性uro:lod0Geometryを使用する。この空間属性は数値地形図との互換性を保つ情報を記述するためのデータ型uro:DmAttributeの一部である。
- トンネルモデル（LOD1）では、tun:Tunnelを使用し、トンネルの形状を立体として表現する。立体は、トンネルの上方からの外周の正射影に一律の高さを与えた箱モデルである。このとき、外周には坑口を含む。
- トンネルモデル（LOD2）では、トンネルの外形を立体として表現し、立体の各境界面を、屋根面（tun:RoofSurface）、底面（tun:GroundSurface）及び外壁面（tun:WallSurface）に区分する。このとき、トンネルの外形には坑口を含む。
- トンネルモデル（LOD3）では、トンネルの形状を、立体により表現し、立体を構成する各境界面を地物として取得するとともに、トンネルの開口部やトンネルの外側に付いている付属物（tun:TunnelInstallation）を地物として取得する。開口部に扉や窓が設けられている場合は、それぞれtun:Doorやtun:Windowにより表現するが、これらが無い場合には閉鎖面（tun:ClosureSurface）として記述する。
- トンネルモデル（LOD4）では、トンネルモデル（LOD3）による外形に加えて、トンネルの内部空間（tun:HollowSpace）を表現する。トンネルの内部空間は、建築物の屋内空間と同様、内壁面（tun:InteriorWallSurface）や床面（tun:FloorSurface）などの境界面に分ける。また、トンネル内部の付属物（tun:IntTunnelInstallation）や可動設備（tun:TunnelFurniture）を表現できる。

また、トンネルモデル（LOD1）からトンネルモデル（LOD4）では、一つのトンネルを複数の区間（tun:TunnelPart）に分けて記述することができる。主題属性が異なる場合やトンネルモデル（LOD1）をより実際に近い形状で表現する場合に使用できる。

トンネルの各LODにおいて使用可能な地物型とその空間属性の一覧を表M-3に示す。

**表 M-3 — トンネルモデルの記述に使用する地物型と空間属性**

| 地物型 | 空間属性 | LOD0 | LOD1 | LOD2 | LOD3 | LOD4 | 適用 |
| --- | --- | --- | --- | --- | --- | --- | --- |
| tun:Tunnel |  | ● | ● | ● | ● | ● |  |
| ↑ | uro:lod0Geometry | ● |  |  |  |  | 数値地形図の取得方法に従う。 |
| ↑ | tun:lod1Solid |  | ● |  |  |  |  |
| ↑ | tun:lod2Solid |  |  | ● |  |  |  |
| ↑ | tun:lod3Solid |  |  |  | ● |  |  |
| ↑ | tun:lod4Solid |  |  |  |  | ■ |  |
| ↑ | tun:lod4MultiSurface |  |  |  |  | ■ | Solidを原則とする。BIMから作成する場合はMultiSurfaceとする。 |
| tun:TunnelPart |  |  | ■ | ■ | ■ | ■ | LOD1において、より実際の形状に近い表現を行う場合に必須とする。LOD2以上において、多連形のトンネルを一つのTunnelとして表現する場合に必須とする。LOD2以上において、一つのトンネルを、属性の異なる複数の部分に分ける場合に必須とする。 |
| ↑ | tun:lod1Solid |  | ■ |  |  |  |  |
| ↑ | tun:lod2Solid |  |  | ■ |  |  | tun:TunnelPartを使用する場合は必須とする。 |
| ↑ | tun:lod3Solid |  |  |  | ■ |  | ↑ |
| ↑ | tun:lod4Solid |  |  |  |  | ■ | ↑ |
| tun:TunnelInstallation |  |  |  |  | ● | ● |  |
| ↑ | tun:lod2Geometry |  |  |  |  |  |  |
| ↑ | tun:lod3Geometry |  |  |  | ● |  | MultiSurfaceとする。 |
| ↑ | tun:lod4Geometry |  |  |  |  | ● | MultiSurfaceとする。 |
| tun:RoofSurface |  |  |  | ■ | ■ | ■ | トンネルの外形を構成する面のうち、上向きの面に使用する。 |
| ↑ | tun:lod2MultiSurface |  |  | ■ |  |  | tun:RoofSurfaceを作る場合は必須とする。 |
| ↑ | tun:lod3MultiSurface |  |  |  | ■ |  | ↑ |
| ↑ | tun:lod4MultiSurface |  |  |  |  | ■ | ↑ |
| tun:WallSurface |  |  |  | ● | ● | ● | トンネルの外形を構成する面のうち、側方の面に使用する。 |
| ↑ | tun:lod2MultiSurface |  |  | ● |  |  |  |
| ↑ | tun:lod3MultiSurface |  |  |  | ● |  | ↑ |
| ↑ | tun:lod4MultiSurface |  |  |  |  | ● | ↑ |
| tun:GroundSurface |  |  |  | ■ | ■ | ■ | トンネルの外形を構成する面のうち、下向きの面に使用する。 |
| ↑ | tun:lod2MultiSurface |  |  | ■ |  |  | tun:GroundSurfaceを作る場合は必須とする。 |
| ↑ | tun:lod3MultiSurface |  |  |  | ■ |  | ↑ |
| ↑ | tun:lod4MultiSurface |  |  |  |  | ■ | ↑ |
| tun:OuterFloorSurface |  |  |  |  |  |  | 標準製品仕様書では使用しない。 |
| ↑ | tun:lod2MultiSurface |  |  |  |  |  |  |
| ↑ | tun:lod3MultiSurface |  |  |  |  |  | ↑ |
| ↑ | tun:lod4MultiSurface |  |  |  |  |  | ↑ |
| tun:OuterCeilingSurface |  |  |  |  |  |  | 標準製品仕様書では使用しない。 |
| ↑ | tun:lod2MultiSurface |  |  |  |  |  |  |
| ↑ | tun:lod3MultiSurface |  |  |  |  |  | ↑ |
| ↑ | tun:lod4MultiSurface |  |  |  |  |  | ↑ |
| tun:ClosureSurface |  |  |  |  | ● | ● | 出入口をtun:ClosureSurfaceとして表現する。 |
| ↑ | tun:lod2MultiSurface |  |  |  |  |  |  |
| ↑ | tun:lod3MultiSurface |  |  |  | ● |  | ↑ |
| ↑ | tun:lod4MultiSurface |  |  |  |  | ● | ↑ |
| tun:InteriorWallSurface |  |  |  |  |  | ● |  |
| ↑ | tun:lod4MultiSurface |  |  |  |  | ● |  |
| tun:CeilingSurface |  |  |  |  |  | ■ |  |
| ↑ | tun:lod4MultiSurface |  |  |  |  | ● |  |
| tun:FloorSurface |  |  |  |  |  | ■ |  |
| ↑ | tun:lod4MultiSurface |  |  |  |  | ● |  |
| tun:Door |  |  |  |  | ● | ● |  |
| ↑ | tun:lod3MultiSurface |  |  |  | ● |  |  |
| ↑ | tun:lod4MultiSurface |  |  |  |  | ● |  |
| tun:Window |  |  |  |  | ● | ● |  |
| ↑ | tun:lod3MultiSurface |  |  |  | ● |  |  |
| ↑ | tun:lod4MultiSurface |  |  |  |  | ● |  |
| tun:HollowSpace |  |  |  |  |  | ● |  |
| ↑ | tun:lod4Solid |  |  |  |  | ● |  |
| tun:IntTunnelnstallation |  |  |  |  |  | ■ | LOD4.1及びLOD4.2では必須とする。 |
| ↑ | tun:lod4Geometry |  |  |  |  | ● | MultiSurfaceとする。 |
| tun:TunnelFurniture |  |  |  |  |  | ■ | LOD4.2では必須とする。 |
| ↑ | tun:lod4Geometry |  |  |  |  | ● | MultiSurfaceとする。 |
| ●：必須■：条件付必須〇：任意（ユースケースに応じて要否を決定してよい） | ← | ← | ← | ← | ← | ← | ← |

## M.2.3 トンネルの空間属性

## M.2.3.1 LOD0

トンネルモデル(LOD0)では、トンネルの形状を点、線又は面として記述する。このとき、トンネルオブジェクトは、トンネルモデル（LOD0）の定義に従ったものでなければならない。

**表 M-4 — M-2: トンネルのLOD0形状定義**

| ID | `/req/tun/2` |
| --- | --- |
| 主題 | 妥当なトンネルデータセットの要件 |
| 分類 | 要件分類M-1: 妥当なトンネルオブジェクト |
| 条文 | トンネルのLOD0の形状は、トンネルモデル（LOD0）の定義に従う。 |

トンネルモデル（LOD0）の取得方法は、数値地形図に従う。

## M.2.3.2 LOD1

トンネルモデル（LOD1）では、トンネルの形状を立体として記述する。このとき、トンネルオブジェクトはトンネルモデル（LOD1）の定義に従ったものでなければならない。

**表 M-5 — M-3: トンネルのLOD1形状定義**

| ID | `/req/tun/3` |
| --- | --- |
| 主題 | 妥当なトンネルデータセットの要件 |
| 分類 | 要件分類M-1: 妥当なトンネルオブジェクト |
| 条文 | トンネルのLOD1の形状は、トンネルモデル（LOD1）の定義に従う。 |

トンネル、ボックスカルバート、シェッド及びシェルターの場合は、坑口を含めた外周に一律の高さを与えて上向きに押し上げた立体として表現する。一律の高さは、構造物の最も低い高さから最も高い高さまでとする。

地下横断歩道の場合は、地下横断歩道の外周に、路面の高さから一律の高さ（設計図や竣工図に示された構造物の深さ）を下向きに押し出した立体として表現する。

**表 M-6 — M-4: tun:TunnelのLOD1形状定義**

| ID | `/req/tun/4` |
| --- | --- |
| 主題 | 妥当なトンネルデータセットの要件 |
| 分類 | 要件分類M-1: 妥当なトンネルオブジェクト |
| 条文 | tun:Tunnelのtun:lod1solidで示される立体（gml:solid）の上面及び下面は水平でなければならず、側面は垂直でなければならない。 |

**表 M-7 — トンネルモデル（LOD1）の取得例**

|  | LOD1 | ← |
| --- | --- | --- |
| 取得例 | ![Image](images/tocM_img002.png) | ![Image](images/tocM_img003.png) |
| 説明 | トンネルの場合は、トンネルの坑口を含めた外周に一律の高さで上向きに押し出した立体として表現する。一律の高さは、トンネルの最も低い高さから最も高い高さまでとする。 トンネル内部が傾斜している場合は、その標高差によりトンネルの形状が実際の形状と乖離する。 そのため、ユースケースの必要に応じて、トンネルをTunnelPartに区切り、区切った区間ごとに一律の高さを押し出すことで、より実際に近い形状で表現できる。 | 地下横断歩道の場合は、地下横断歩道の外周に、路面の高さから一律の高さ（設計図や竣工図に示された構造物の深さ）で下向きに押し出した立体として表現する。地下横断歩道内部が傾斜している場合は、その標高差により地下横断歩道の形状が実際の形状と乖離する。 そのため、ユースケースの必要に応じて、地下横断歩道をTunnelPartに区切り、区切った区間ごとに一律の高さを押し出すことで、より実際に近い形状で表現できる。 なお、地下横断歩道の出入口に、防風・雨・雪及び採光を目的として設けられた建屋は、都市設備（frn:CityFurniture）として取得する。 |

地下横断歩道の出入口に、防風・雨・雪及び採光を目的として設けられた建屋は、都市設備（frn:CityFurniture）として取得する。

トンネル、ボックスカルバート、シェッド及びシェルターの場合は、坑口を含む外周を作成し、一律の高さで上向きに押し出した立体となる。一律の高さは、竣工図等に記載された坑口（坑門）の最高高さ又は計測により得られた坑口（坑門）の最高高さとする。入口となる坑口と出口となる坑口での路面の高さに標高差がある場合は、低い方の路面の高さから、高い方の坑口最高高さまで押し出す。

地下横断歩道の場合は、地下横断歩道の外形線により囲まれた平面に、出入口部の路面の高さから一律の高さ（設計図や竣工図に示された構造物の深さ）で下向きに押し出した立体として表現する。出入口部に標高差がある場合は、最低高さから最高高さまでとする。

**表 M-8 — M-5: トンネルモデルの上面高さの基準**

| ID | `/req/tun/5` |
| --- | --- |
| 主題 | 妥当なトンネルデータセットの要件 |
| 分類 | 要件分類M-1: 妥当なトンネルオブジェクト |
| 条文 | トンネルモデル（LOD1）の上面の高さは、以下のいずれかを原則とする。 |
| A | 上面が航空測量によりから取得の場合、坑口（坑門）の最高高さ |
| B | 上面が可視の場合、上方からの外周の正射影に含まれる点群データの最高高さ |
| C | 地下横断歩道の場合、出入口部の路面標高の最高高さ |

トンネルモデル（LOD1）は、取得基準によって上面の高さの取得方法が異なる。

トンネル、ボックスカルバート、シェッド及びシェルターのうち、構造物の上面の高さが航空測量により取得できない場合は、竣工図等に記載された坑口（坑門）の最高高さ又は計測によって得られた坑口（坑門）の最高高さを上面の高さとする。トンネル、ボックスカルバート、シェッド及びシェルターのうち、構造物の上面の高さが航空測量により取得できる場合は、計測によって得られた最高高さを使用する 。

地下横断歩道の場合、竣工図等に記載された出入口部の路面標高又は計測によって得られた出入口部の路面標高とする。出入口部に標高差がある場合は、最高高さを上面の高さとする。

**表 M-9 — M-6: トンネルモデルの底面高さの基準**

| ID | `/req/tun/6` |
| --- | --- |
| 主題 | 妥当なトンネルデータセットの要件 |
| 分類 | 要件分類M-1: 妥当なトンネルオブジェクト |
| 条文 | トンネルモデル（LOD1）の底面の高さは、以下のいずれかを原則とする。 |
| A | トンネルの場合、トンネルの最低高さ |
| B | 地下横断歩道の場合、地下横断歩道の最低高さ |
| C | カルバート、シェッド及びシェルターの場合、構造物の正射影と地形との交線の最下部点の高さ（最も低い標高） |

- トンネルの最低高さは、坑口の路面の標高から標準断面図等の図面から取得したトンネルの最大深さを減算し求める。
- 地下横断歩道の最低高さは、出入口部の標高から竣工図や設計図等の図面から取得した地下横断歩道の最大深さを減算し求める。
- カルバート、シェッド及びシェルターの最低高さは、シェッド等の正射影に含まれる地形の高さの最低高さとする。

![Image](images/tocM_img004.png)

## M.2.3.3 LOD2

トンネルモデル（LOD2）では、トンネルの形状を立体として記述する。このとき、トンネルオブジェクトはトンネルモデル（LOD2）の定義に従ったものでなければならない。

**表 M-10 — M-7: トンネルのLOD2形状定義**

| ID | `/req/tun/7` |
| --- | --- |
| 主題 | 妥当なトンネルデータセットの要件 |
| 分類 | 要件分類M-1: 妥当なトンネルオブジェクト |
| 条文 | トンネルのLOD2の形状は、トンネルモデル（LOD2）の定義に従う。 |

**表 M-11 — トンネルモデル（LOD2）の取得例**

|  | LOD2 | ← |
| --- | --- | --- |
| 取得例 | ![Image](images/tocM_img005.png) | ![Image](images/tocM_img006.png) |
| 説明 | トンネルの外形を立体として表現し、立体の各境界面を、屋根や外壁に区分する。トンネルの外形には坑口を含む。 | 地下横断歩道の外形を立体として取得し、立体の各境界面を、屋根や外壁に区分する。地下横断歩道の出入口に設けられた建屋は、都市設備（CityFurniture）として取得する。 |

トンネルモデル（LOD2）では、トンネルの形状となる立体の各境界面を、屋根面（tun:RoofSurface）、外壁面（tun:WallSurface）及び底面（tun:GroundSurface）に区分する。このとき、上向きとなる面は屋根面、下向きとなる面は底面、残りは外壁面とすることが基本となる。

ただし、トンネルの断面形状によって明確に区分できない場合は、外壁面（tun:WallSurface）として取得する。

![Image](images/tocM_img007.png)

**表 M-12 — M-8: トンネルモデルのLOD2境界面区分条件**

| ID | `/req/tun/8` |
| --- | --- |
| 主題 | 妥当なトンネルデータセットの要件 |
| 分類 | 要件分類M-1: 妥当なトンネルオブジェクト |
| 条文 | トンネルモデル（LOD2）におけるトンネルの立体を構成する各境界面の区分が難しい場合は、tun:WallSurfaceに区分する。 |

なお、トンネルモデル（LOD2）の坑口、行政界等で区切る場合の境界面及びtun:TunnelPartを使用する場合の隣接するtun:TunnelPartと接する境界面は、tun:WallSurfaceに区分する。

## M.2.3.4 LOD3

トンネルモデル（LOD3）では、トンネルの形状を立体として記述する。このとき、トンネルオブジェクトはトンネルモデル（LOD3）の定義に従ったものでなければならない。

**表 M-13 — M-9: トンネルのLOD3形状定義**

| ID | `/req/tun/9` |
| --- | --- |
| 主題 | 妥当なトンネルデータセットの要件 |
| 分類 | 要件分類M-1: 妥当なトンネルオブジェクト |
| 条文 | トンネルのLOD3の形状は、トンネルモデル（LOD3）の定義に従う。 |

トンネルモデル（LOD3）では、LOD2と同様にトンネルの形状となる立体の各境界面を屋根面（tun:RoofSurface）、外壁面（tun:WallSurface）及び底面（tun:GroundSurface）に区分する。また、トンネルの外側についている付属物を区分する。さらに、トンネルの出入口部分は開口部となり、扉や窓がある場合には、tun:Door又はtun:Windowにより取得する。これらがない開口部は、tun:ClosureSurfaceとして取得する。

**表 M-14 — トンネルモデル（LOD3）の取得例**

|  | LOD3 | ← |
| --- | --- | --- |
| 取得例 | ![Image](images/tocM_img008.png) | ![Image](images/tocM_img009.png) |
| 説明 | トンネルの外形を立体として表現し、立体の各境界面を、屋根、外壁及び開口部に区分する。さらにトンネルの外側に付いている付属物として、坑門や連絡坑を取得する。 | 地下横断歩道の外形を立体として取得し、立体の各境界面を、屋根や外壁に区分する。地下横断歩道の出入口に設けられた建屋は、都市設備（CityFurniture）として取得する。 |

## M.2.3.5 LOD4

トンネルモデル（LOD4）では、トンネルの形状を面又は立体として記述する。また、トンネルの外形に加えて、トンネルの内部を記述する。このとき、トンネルオブジェクトはトンネルモデル（LOD4）の定義に従ったものでなければならない。

トンネルモデル（LOD4）は、トンネル内部の表現において含むべき地物により、LOD4.0、LOD4.1及びLOD4.2に分かれる。

**表 M-15 — M-10: トンネルのLOD4形状定義**

| ID | `/req/tun/10` |
| --- | --- |
| 主題 | 妥当なトンネルデータセットの要件 |
| 分類 | 要件分類M-1: 妥当なトンネルオブジェクト |
| 条文 | トンネルのLOD4の形状は、トンネルモデル（LOD4.0）、トンネルモデル（LOD4.1）又はトンネルモデル（LOD4.2）の定義に従う。 |

**表 M-16 — トンネルモデル（LOD4）の取得例**

|  | 取得例 | 説明 |
| --- | --- | --- |
| LOD4.0 | ![Image](images/tocM_img010.png) | LOD3.0の外形に加え、トンネル内部（内空）を再現する。内空の境界面を床（FloorSurface）、内壁面（InteriorWallSurface）又は天井面（CeilingSurface）に区分する。また、内壁等に扉や窓がある場合に区分する。 トンネル内部の付属物は取得しない。 |
| LOD4.1 | ![Image](images/tocM_img011.png) | LOD4.0に加え、「短辺の実長が3ｍ以上」又は「横断又は縦断面積が3m2以上かつ短辺の実長が1m以上」の固定された設備を取得する。左図の例の場合は、換気用のジェットファンの短辺の実長が3m以上に該当し、また、手すりが縦断面積が3m2以上かつ短辺の実長が1m以上に該当したため、取得された。 |
| LOD4.2 | ![Image](images/tocM_img012.png) | LOD4.1に加え、全ての固定された設備及び固定されていない設備を取得する。左図の例の場合は、消火栓、警報標示板、トンネル照明及び非常口表示灯が固定された設備に該当し、また、看板が固定されていない設備に該当したため取得された。 |

## M.2.4 トンネルの主題属性

トンネルの主題属性には、あらかじめCityGML又はGMLにおいて定義された属性（接頭辞tun、gml）と、i-URにより拡張された属性（接頭辞uro）がある。CityGMLで定義された属性は、トンネルの機能など、基本的な情報となる。

i-URにより拡張された属性には、大きく10種類の属性がある。トンネルの管理に関する基本的な情報（uro:tunBaseAttribute）、トンネルの構造に関する情報（uro:tunStructureAttribute）、トンネルの機能に関する情報（uro:tunFunctionalAttribute）、トンネルの損傷に関する情報（uro:tunRiskAssessmentAttribute）、トンネルの災害リスクに関する情報（uro:tunDisasterRiskAttribute）、作成したトンネルのデータ品質に関する情報（uro:DataQualityAttribute）、特定分野における施設の分類情報（uro:tunFacilityTypeAttribute）、uro:tunFacilityTypeAttribute.classによって指定された分野における施設の識別情報（uro:tunFacilityIdAttribute）、uro:tunFacilityTypeAttribute.classによって指定された分野における施設管理情報（uro:tunFacilityAttribute）、公共測量標準図式による図形表現に必要な情報（uro:tunDmAttribute）である。

## M.2.4.1 構造物管理属性（uro:tunBaseAttribute）

トンネルの管理者や建設に関する諸元等、トンネルの管理に必要な基本的な情報。

## M.2.4.2 構造物構造属性（uro:tunStructureAttribute）

トンネルの延長や幅員など、トンネルの構造に関する情報。

## M.2.4.3 構造物機能属性（uro:tunFunctionalAttribute）

トンネルの利用者や進行方向。

## M.2.4.4 構造物損傷属性（uro:tunRiskAssessmentAttribute）

構造物の損傷及び対応状況に関する情報。

## M.2.4.5 災害リスク属性（uro:tunDisasterRiskAttribute）

浸水想定区域や土砂災害警戒区域等の災害リスクに関する情報。

## M.2.4.6 施設管理のための属性

uro:FacilityTypeAttributeは、施設管理のための属性は、港湾施設及び漁港施設、河川管理施設や公園管理施設等の施設管理に必要な情報を定義した属性である。施設管理のための属性は以下のデータ型を用いて記述する。

## M.2.4.6.1 施設分類属性（uro:FacilityTypeAttribute）

uro:FacilityTypeAttributeは、各分野で定める施設の区分を記述するためのデータ型である。CityGMLは、地物型を物体としての性質に着目して定義し、機能や用途は属性で区分している。例えば、「トンネル（tun:Tunnel）」という地物型を定義し、tun:functionにより「道路トンネル」や「鉄道トンネル」などを区分している。これにより、都市に存在する様々な地物を、分野を問わず、網羅的に、かつ、矛盾が無く表現することを目指している。一方、各分野には独自の施設の区分がある。この区分は当該分野での施設管理に必要な情報であるが、CityGMLの地物型の区分とは一致しない。そこで、これらの地物型に分野独自の区分を付与するためにこのデータ型を用いる。uro:FacilityTypeAttributeは、二つの属性をもつ。uro:classは分野を特定するための属性である。またuro:functionは、uro:classにより特定した分野における施設の区分を示す。

## M.2.4.6.2 施設識別属性（uro:FacilityIdAttribute）

uro:FacilityIdAttributeは、施設の位置を特定する情報及び施設を識別する情報を記述するためのデータ型である。uro:FacilityIdAttributeは、施設を識別するための情報として、識別子（uro:id）や正式な名称以外の呼称（uro:alternativeName）に加え、施設の位置を示すための、都道府県（uro:prefecture）、市区町村（uro:city）及び開始位置の経緯度（uro:startLat、uro:startLong）を属性としてもつ。また、鉄道上や道路上の施設については、路線や距離標での位置特定のための属性（uro:route、uro:startPost、uro:endPost）を使用できる。

なお、河川管理施設の場合は、uro:FacilityIdAttributeを継承するuro:RiverFacilityIdAttributeを使用する。これにより、左右岸上での位置の情報を記述できる。

## M.2.4.6.3 施設詳細属性（uro:FacilityAttribute）

uro:FacilityAttributeは、各分野において施設管理に必要となる情報を記述するためのデータ型である。uro:FacilityAttributeは、抽象クラスであり、これを継承する具象となるデータ型に、施設の区分毎に必要となる情報を属性として定義している。

標準製品仕様書では、港湾施設、漁港施設及び公園施設について、細分した施設の区分ごとにデータ型を定義している。また、施設に関する工事や点検の状況や内容を記述するためのデータ型（uro:MaintenanceHistoryAttribute）を定義している。

## M.2.4.7 数値地形図属性（uro:tunDmAttribute）

公共測量標準図式に従った形状表現に必要な情報を記述するための属性である。LOD0の幾何オブジェクトのほか、数値地形図との互換性を保つために必要な情報が、属性として定義されている。

## M.2.4.8 品質属性（uro:DataQualityAttribute）

トンネルオブジェクトの作成に使用した原典資料の記録や、適用した詳細なLODの区分を示すための属性である。
使用した原典資料やそれに基づくデータの品質、また、採用したLODは、データセットのメタデータに記録できる。ただし、データセット全体に対して一つのメタデータを作成することが基本となり、個々の都市オブジェクトの品質を記録することは困難である。

同じデータセットの中に、航空写真測量により作成したその他の構造物オブジェクトや完成図等から作成したその他の構造物オブジェクトというように、複数の品質をもつ都市オブジェクトが混在している場合には、都市オブジェクトごとにこの構造物品質属性を使用して、品質情報を記録することで、その品質を明確にできる。

そこで、標準製品仕様書では、個々のデータに対してデータ品質に関する情報を記述するための属性として、「データ品質属性」（uro:DataQualityAttribute）を定義している。データ品質属性は、属性としてデータ作成に使用した原典資料の地図情報レベル、その他原典資料の諸元及び精緻化したLODをもつ。

3D都市モデルに含まれる全てのトンネルオブジェクトは、このデータ品質属性を必ず作成しなければならない。ただし、トンネル（tun:Tunnel）又はトンネル部分（tun:TunnelPart）に対してデータ品質属性を付与することはできるが、これを構成する屋根面や外壁面（tun:_BoundarySurfaceの下位クラス）にデータ品質属性を付与することはできない。

## M.3 tun:TunnelPart

tun:TunnelPartは、トンネルの一部であり、一つのトンネルを複数の部分として分けて記述するために用いる。一つのトンネルを複数の部分に分けて記述する場合とは、以下をいう。

- LOD1において、より実際の形状に近い表現を行う場合。
- LOD2以上において、多連形のトンネルを一つのtun:Tunnelとして表現する場合に必須とする。
- LOD2以上において、一つのトンネルを、属性の異なる複数の部分に分ける場合に必須とする。

![Image](images/tocM_img013.png)

トンネルモデル（LOD1）でtun:TunnelPartを使用する場合は、任意に区切った区間内でのトンネルの最高高さと最低高さを表現したモデルとなる。

## M.3.1 トンネル部分の空間属性

tun:TunnelPartの空間属性は、tun:Tunnelの空間属性の取得方法と同じである。
なお、連続するtun:TunnelPartの境界面は、tun:ClosureSurfaceとなる。

## M.3.2 トンネル部分の主題属性

tun:TunnelPartは、tun:Tunnelと同様の主題属性をもつことができる。必要に応じてtun:TunnelPartごとに個別の属性をもつ。

## M.4 tun:HollowSpace

tun:HollowSpaceは、トンネルの内部空間の記述に使用する地物型である。トンネルモデル（LOD4）においてのみ使用する。

## M.4.1 トンネル内部空間の空間属性

トンネルモデル（LOD4）において、トンネルの内部空間の形状は、立体により表現する。立体は、境界面に区分し、それぞれの境界面は、tun:CeilingSurface、tun:FloorSurface、tun:InteriorWallSurface又はtun:ClosureSurfaceのいずれかにならなければならない。

**表 M-17 — M-11: 境界面のポリゴンの条件**

| ID | `/req/tun/11` |
| --- | --- |
| 主題 | 妥当なトンネルデータセットの要件 |
| 分類 | 要件分類M-1: 妥当なトンネルオブジェクト |
| 条文 | tun:HollowSpaceのgml:Solidを構成する境界面のgml:Polygonは、以下のいずれかの地物型のLOD4幾何オブジェクトに含まれなければならない |
| A | tun:boundedByによりこのtun:HollowSpaceが参照する境界面（tun:_BoundarySurface）及びその開口部（tun:_Opening） |

## M.5 tun:TunnelInstallation

tun:TunnelInstallationは、トンネル本体の外側に設置され、トンネルの外観を特徴づける恒久的な設備を記述するために用いる。トンネルの付帯的な設備であり、主要な部分であってはならない。

トンネルの付属物には以下を含む。ただし、全て外部に設置され、トンネルと接するもののみを対象とする。
避難連絡坑、受変電設備、予備電源設備、排水設備、換気設備、排水設備、監視制御設備、通報装置、非常用警報装置、消火設備、避難誘導設備、その他。

ただし、ユースケースの要求に応じて、取得対象とする付属物を限定してもよく、また、付属物として取得せずトンネルの一部として取得してもよい。

## M.5.1 トンネル付属物の空間属性

tun:TunnelInstallationの空間属性の空間属性の型は、gml:_Geometryである。gml:_Geometryは、幾何オブジェクトの基底要素であり、実装においては、この下位型のうち、具象となる幾何オブジェクトを、地物の形状に合わせて選定する。

**表 M-18 — M-12: tun:TunnelInstallationの空間属性タイプ**

| ID | `/req/tun/12` |
| --- | --- |
| 主題 | 妥当なトンネルデータセットの要件 |
| 分類 | 要件分類M-1: 妥当なトンネルオブジェクト |
| 条文 | tun:TunnelInstallationの空間属性の型には、gml:MultiSurfaceを使用することを原則とする。 |

CityGMLでは、曲面や立体だけではなく、点や曲線も使用可能である。しかしながら3D都市モデルでは、3次元での利用を想定し、付属物の形状に使用可能な幾何オブジェクトを曲面又は立体に限定する。原則として面の集まり（gml:MultiSurface）を使用するが、ユースケースの必要に応じてgml:Solidを使用できる。

## M.6 tun:IntTunnelInstallation

tun:IntTunnelInstallationは、トンネルの内部に設置された、恒久的に存在する固定的な設備（内部付属物）を記述するために用いる。トンネルの付帯的な設備であり、主要な部分であってはならない。

避難連絡坑、受変電設備、予備電源設備、排水設備、換気設備、排水設備、監視制御設備、通報装置、非常用警報装置、消火設備、避難誘導設備、その他。

ただし、ユースケースの要求に応じて、取得対象とする内部付属物を限定してもよく、また、内部付属物として取得せずトンネルの一部として取得してもよい。

## M.6.1 トンネル内部付属物の空間属性

tun:IntTunnelInstallationの空間属性の空間属性の型は、gml:_Geometryである。gml:_Geometryは、幾何オブジェクトの基底要素であり、実装においては、この下位型のうち、具象となる幾何オブジェクトを、地物の形状に合わせて選定する。

**表 M-19 — M-13: tun:IntTunnelInstallationの空間属性タイプ**

| ID | `/req/tun/13` |
| --- | --- |
| 主題 | 妥当なトンネルデータセットの要件 |
| 分類 | 要件分類M-1: 妥当なトンネルオブジェクト |
| 条文 | tun:IntTunnelInstallationの空間属性の型には、gml:MultiSurfaceを使用することを原則とする。 |

CityGMLでは、曲面や立体だけではなく、点や曲線も使用可能である。しかしながら3D都市モデルでは、3次元での利用を想定し、付属物の形状に使用可能な幾何オブジェクトを曲面又は立体に限定する。原則として面の集まり（gmlMultiSurface）を使用するが、ユースケースの必要に応じてgml:Solidを使用できる。

## M.7 tun:TunnelFurniture

tun:TunnelFurnitureは、トンネル内部の区画に配置された、可動設備を記述するために用いる。tun:IntTunnelInstallationが、トンネル内部に設置された恒久的かつ固定的な設備であることと対照的に、tun:TunnelFurnitureは椅子や机のような、動かすことができる（位置が固定されない）設備である。

以下の設備のうち、固定されていない設備を対象とする。
受変電設備、予備電源設備、排水設備、換気設備、排水設備、監視制御設備、通報装置、非常用警報装置、消火設備、避難誘導設備、その他。

ただし、ユースケースの要求に応じて、取得対象とする可動設備を限定してよい。

## M.7.1 トンネル内部の可動設備の空間属性

tun:TunnelIFurnitureの空間属性の空間属性の型は、gml:_Geometryである。gml:_Geometryは、幾何オブジェクトの基底要素であり、実装においては、この下位型のうち、具象となる幾何オブジェクトを、地物の形状に合わせて選定する。

**表 M-20 — M-14: tun:TunnelFurnitureの空間属性タイプ**

| ID | `/req/tun/14` |
| --- | --- |
| 主題 | 妥当なトンネルデータセットの要件 |
| 分類 | 要件分類M-1: 妥当なトンネルオブジェクト |
| 条文 | tun:TunnelFurnitureの空間属性の型には、gml:MultiSurfaceを使用することを原則とする。 |

CityGMLでは、曲面や立体だけではなく、点や曲線も使用可能である。しかしながら3D都市モデルでは、3次元での利用を想定し、可動設備の形状に使用可能な幾何オブジェクトを曲面又は立体に限定する。原則として面の集まり（gmlMultiSurface）を使用するが、ユースケースの必要に応じてgml:Solidを使用できる。

## M.8 tun:_BoundarySurface

tun:_BoundarySurfaceは、トンネル（tun:Tunnel）やトンネルの部分（tun:TunnelPart）の屋根面及び壁面、底面等の境界面を構成する地物型である。トンネルモデル（LOD2）、トンネルモデル（LOD3）及びトンネルモデル（LOD4）を作成する際に使用される。

この地物型は抽象地物であり、実装においては、この下位型の具象となる地物型を使用する。

**表 M-21 — M-15: tun:_BoundarySurfaceの種類**

| ID | `/req/tun/15` |
| --- | --- |
| 主題 | 妥当なトンネルデータセットの要件 |
| 分類 | 要件分類M-1: 妥当なトンネルオブジェクト |
| 条文 | tun:_BoundarySurfaceは、屋根面（tun:RoofSurface）、外壁面（tun:WallSurface）、底面（tun:GroundSurface）、外部床面（tun:OuterFloorSurface）、内壁面（tun:InteriorWallSurface）、天井面（tun:CeilingSurface）、床面（tun:FloorSurface）、閉鎖面（tun:ClosureSurface）のいずれかとなる。 |

CityGMLでは、トンネルの境界面としてtun:_BoundarySurfaceの下位型となる地物型が用意されている。ただし外部天井面（tun:OuterCeillingSurface）、屋外床面（tun:OuterFloorSurface）は対象外とする（使用しない）。

![Image](images/tocM_img014.png)

## M.8.1 境界面の空間属性

屋根面及び壁面、底面の境界面となる地物型の空間属性（面）は、トンネルの立体を構成する境界面に一致する。

**表 M-22 — M-16: 境界面の幾何オブジェクト参照条件**

| ID | `/req/tun/16` |
| --- | --- |
| 主題 | 妥当なトンネルデータセットの要件 |
| 分類 | 要件分類M-1: 妥当なトンネルオブジェクト |
| 条文 | 境界面の空間属性を構成する幾何オブジェクトは、トンネルの立体を構成する境界面として参照されなければならない。 |

## M.8.2 境界面の下位型

## M.8.2.1 tun:RoofSurface

tun:RoofSurfaceは、屋根面を記述するために使用する地物型である。

**表 M-23 — M-17: 外壁面と屋根面の区分条件**

| ID | `/req/tun/17` |
| --- | --- |
| 主題 | 妥当なトンネルデータセットの要件 |
| 分類 | 要件分類M-1: 妥当なトンネルオブジェクト |
| 条文 | 外壁面（tun:WallSurface）と屋根面（tun:RoofSurface）との区分が構造上難しい場合は、外壁面（tun:WallSurface）として取得することを基本とする。 |

## M.8.2.2 tun:WallSurface

tun:WallSurfaceは、壁面を記述するために使用する地物型である。

## M.8.2.3 tun:GroundSurface

tun:GroundSurfaceは、トンネルの底面を記述するために使用する地物型である。

## M.8.2.4 tun:OuterFloorSurface

tun:OuterFloorSurfaceはトンネルの外側を覆う部分であり、通行可能な床面としての機能を有する部分の記述に使用する地物型である。標準製品仕様書では使用しない。

## M.8.2.5 tun:ClosureSurface

tun:ClosureSurfaceは、トンネルの開口部を立体として閉じるために、境界面として設けられた仮想的な面である。トンネルの境界面に開口部が存在するが、開口部内の詳細なデータ作成が不要である場合に、開口部を閉じるために便宜上設けられている。内部空間で用途が異なる等により区分する場合は、tun:HollowSpaceを使用して空間を区分する。

![Image](images/tocM_img015.png)

## M.8.2.6 tun:OuterCeilingSurface

tun:OuterCeilingSurfaceは、トンネルの外側を覆う部分であり、天井としての機能を有する面を記述するために使用する地物型である。標準製品仕様書では使用しない。

## M.8.2.7 tun:CeilingSurface

tun:CeilingSurfaceは、トンネルの内部の天井面を記述するために使用する地物型である。

**表 M-24 — M-18: 内壁面と天井面の区分条件**

| ID | `/req/tun/18` |
| --- | --- |
| 主題 | 妥当なトンネルデータセットの要件 |
| 分類 | 要件分類M-1: 妥当なトンネルオブジェクト |
| 条文 | 内壁面（tun:InteriorWallSurface）と天井面（tun:CeilingSurface）との区分が構造上難しい場合は、内壁面（tun:InteriorWallSurface）として取得することを基本とする。 |

## M.8.2.8 tun:InteriorWallSurface

tun:InteriorWallSurfaceは、トンネルの内部空間の区画を区切る壁や仕切りとしての機能を有する面を記述するために使用する地物型である。

## M.8.2.9 tun:FloorSurface

tun:FloorSurfaceは、トンネルの内部空間の下面に位置する舗装等が存在する板状の構造物（床面）を記述するために使用する地物型である。

## M.9 tun:_Opening

tun:_Openingは、壁面や屋根面に設置される開口部である。開口部は、トンネルモデル（LOD3）又はトンネルモデル（LOD4）において記述できる。開口部は、これが設置された境界面のtun:openingにより記述又は参照されなければならない。

## M.9.1 開口部の空間属性

tun:_Openingの空間属性tun:lod3MultiSurface及びtun:lod4MultiSurfaceの型は、面（gml:MultiSurface）である。これらの開口部の面は、境界面（壁面や屋根面）の一部となる。もし開口部と境界面とに位相関係をもたせる場合には、境界面の内空と開口部の空間属性の境界線とを一致させる。位相関係が不要な場合には、境界面に内空を設ける必要はない。

## M.9.2 開口部の下位型

## M.9.2.1 tun:Window

tun:Windowは、採光、通風、換気、眺望などの目的のため、トンネルの屋根、天井、壁、床などに設けられた開口部のうち、人や物の出入りを目的としないものを記述するために使用する地物型である。

## M.9.2.2 tun:Door

tun:Doorは、トンネルの屋根、天井、壁、床などに設けられた開口部のうち、人や物の出入りを目的とするものを記述するために使用する地物型である。

## M.10 標準的な作業手順

各LODの幾何オブジェクトを作成する際の標準的な作業手順及び作業上の留意事項を示す。

## M.10.1 幾何オブジェクトの作成

作成に必要となる原典資料を表M-25に示す。

**表 M-25 — 原典資料一覧**

|  | 水平位置 | 高さ | 上下面の形状 | 内部の形状 | 付属物等 |
| --- | --- | --- | --- | --- | --- |
| LOD0 | 都市計画図等のDMデータ | ― | ― | ― | ― |
| LOD1 | 以下のデータを使用する。トンネル標準断面図又は標準横断図都市計画図等のDMデータ以下のいずれかのデータを一つ以上使用する。坑門工一般図一般図 a)航空写真 | 以下のいずれかのデータを一つ以上使用する。トンネル標準断面図標準横断図坑門工一般図一般図 a)MMS点群航空レーザ点群航空写真から作成した点群 | ― | ― | ― |
| LOD2 | 以下のデータを使用する。トンネル標準断面図又は標準横断図都市計画図等のDMデータ地質平面･縦断図以下のいずれかのデータを一つ以上使用する。坑門工一般図一般図 a)航空写真 | 以下のデータを使用する。トンネル標準断面図又は標準横断図地質平面･縦断図縦断図 以下のいずれかのデータを一つ以上使用する。 b)坑門工一般図一般図 a)MMS点群航空レーザ点群航空写真から作成した点群 | 以下のデータを使用する。トンネル標準断面図又は標準横断図地質平面･縦断図縦断図以下のいずれかのデータを一つ以上使用する。坑門工一般図一般図 a)航空写真から作成した点群 | ― | ― |
| LOD3 | 以下のデータを使用する。トンネル標準断面図又は標準横断図都市計画図等のDMデータ地質平面･縦断図以下のいずれかのデータを一つ以上使用する。坑門工一般図一般図 a)航空写真MMS点群 | 以下のデータを使用する。トンネル標準断面図又は標準横断図地質平面･縦断図縦断図 以下のいずれかのデータを一つ以上使用する。 b)坑門工一般図一般図 a)MMS点群航空レーザ点群航空写真から作成した点群 | 以下のデータを使用する。トンネル標準断面図又は標準横断図地質平面･縦断図縦断図以下のいずれかのデータを一つ以上使用する。坑門工一般図一般図 a)航空写真から作成した点群 | ― | ― |
| LOD4.0 | 以下のデータを使用する。トンネル標準断面図又は標準横断図都市計画図等のDMデータ地質平面･縦断図以下のいずれかのデータを一つ以上使用する。坑門工一般図一般図 a)航空写真MMS点群 | 以下のデータを使用する。トンネル標準断面図又は標準横断図地質平面･縦断図縦断図 以下のいずれかのデータを一つ以上使用する。 b)坑門工一般図一般図 a)MMS点群航空レーザ点群航空写真から作成した点群 | 以下のデータを使用する。トンネル標準断面図又は標準横断図地質平面･縦断図縦断図以下のいずれかのデータを一つ以上使用する。坑門工一般図一般図 a)航空写真から作成した点群 | 以下のいずれかのデータを一つ以上使用する。トンネル標準断面図及び地質平面･縦断図標準横断図及び地質平面･縦断図一般図 a)MMS点群LiderSLAM点群 | ― |
| LOD4.1 | BIM/CIMモデル又は以下のデータを使用する。トンネル標準断面図又は標準横断図都市計画図等のDMデータ地質平面･縦断図 BIM/CIMモデル又は以下のいずれかのデータを一つ以上使用する。坑門工一般図一般図 a)航空写真MMS点群 | BIM/CIMモデル又は以下のデータを使用する。トンネル標準断面図又は標準横断図地質平面･縦断図縦断図 BIM/CIMモデル又は以下のいずれかのデータを一つ以上使用する。 b)坑門工一般図一般図 a)MMS点群航空レーザ点群航空写真から作成した点群 | BIM/CIMモデル又は以下のデータを使用する。トンネル標準断面図又は標準横断図地質平面･縦断図縦断図 BIM/CIMモデル又は以下のいずれかのデータを一つ以上使用する。坑門工一般図一般図 a)航空写真から作成した点群 | 以下のいずれかのデータを一つ以上使用する。トンネル標準断面図及び地質平面･縦断図標準横断図及び地質平面･縦断図一般図 a)MMS点群LiderSLAM点群BIM/CIMモデル | 以下のいずれかのデータを一つ以上使用する。MMS点群LiderSLAM点群非常用施設配置図及び非常用施設箱抜工図BIM/CIMモデル |
| LOD4.2 | BIM/CIMモデル又は以下のデータを使用する。トンネル標準断面図又は標準横断図都市計画図等のDMデータ地質平面･縦断図 BIM/CIMモデル又は以下のいずれかのデータを一つ以上使用する。坑門工一般図一般図 a)航空写真MMS点群 | BIM/CIMモデル又は以下のデータを使用する。トンネル標準断面図又は標準横断図地質平面･縦断図縦断図 BIM/CIMモデル又は以下のいずれかのデータを一つ以上使用する。 b)坑門工一般図一般図 a)MMS点群航空レーザ点群航空写真から作成した点群 | BIM/CIMモデル又は以下のデータを使用する。トンネル標準断面図又は標準横断図地質平面･縦断図縦断図 BIM/CIMモデル又は以下のいずれかのデータを一つ以上使用する。坑門工一般図一般図 a)航空写真から作成した点群 | 以下のいずれかのデータを一つ以上使用する。トンネル標準断面図及び地質平面･縦断図標準横断図及び地質平面･縦断図一般図 a)MMS点群LiderSLAM点群BIM/CIMモデル | 以下のいずれかのデータを一つ以上使用する。MMS点群LiderSLAM点群非常用施設配置図及び非常用施設箱抜工図BIM/CIMモデル |
|  | ← | ← | ← | ← | ← |

「一般図」以外の各図面の名称は、土木設計業務等共通仕様書（案）　第6編　道路編で作成することが定められた図面の名称である。各図面は一例であり、作業手順に必要な情報が取得可能な図面であれば使用できる。

トンネルモデル（LOD4.1、LOD4.2）はBIM/CIMモデルから作成することも可能である。ただし、作成するトンネルモデル（LOD4.1、LOD4.2）は標準製品仕様書で定められた地物型で作成する必要がある。

「一般図」とは平面図、配置図、断面図等の総称であり、表M-25では、道路施設台帳に記載される一般図を指す。

「高さ」の原典資料についてはトンネル標準断面図又は標準横断図、地質平面･縦断図、縦断図のいずれかに標高値が記載されている場合は、坑門工一般図又は測量成果を使用せずに作成することができる。

## M.10.1.1 LOD0

## M.10.1.1.1 原典資料

**表 M-26 — LOD0の原典資料**

|  | 水平位置 | 高さ | 上下面の形状 | 内部の形状 | 付属物等 |
| --- | --- | --- | --- | --- | --- |
| LOD0 | 都市計画図等のDM　データ | ― | ― | ― | ― |

## M.10.1.1.2 作業手順

- DMデータより、道路のトンネル、鉄道のトンネル、坑口の図式を抽出する。

## M.10.1.2 LOD1

## M.10.1.2.1 原典資料

**表 M-27 — LOD1の原典資料**

|  | 水平位置 | 高さ | 上下面の形状 | 内部の形状 | 付属物等 |
| --- | --- | --- | --- | --- | --- |
| LOD1 | 以下のデータを使用する。トンネル標準断面図又は標準横断図都市計画図等のDMデータ以下のいずれかのデータを一つ以上使用する。坑門工一般図一般図 a)航空写真 | 以下のいずれかのデータを一つ以上使用する。トンネル標準断面図標準横断図坑門工一般図MMS点群航空レーザ点群航空写真から作成した点群 | ― | ― | ― |
|  | ← | ← | ← | ← | ← |

「一般図」とは平面図、配置図、断面図等の総称であり、表M-25では、道路施設台帳に記載される一般図を指す。

## M.10.1.2.2 作業手順（トンネル、カルバート、シェッド、シェルター）

- DMデータの道路縁から、道路中心線を作成する。
- **a）で作成した道路中心線を中心とし、トンネルの幅を用いてポリゴンを作成する。
トンネルの幅は、トンネルの外壁の厚みを含む幅又は坑門の幅とする。トンネルの外壁の厚みを含む幅はトンネル標準断面図から取得することを基本とする。また、坑門の幅は坑門工一般図から取得することを基本とする。DMデータで坑門の形状が取得されている場合及び坑門の幅を航空写真などの測量成果から取得可能な場合は、それをトンネルの幅としてもよい。 
カルバート、シェッド及びシェルターの場合は一般図又は航空写真より、外形の幅を取得する。 
 TunnelPartを用いてトンネルを延長方向に区切る場合は、ポリゴンを任意の位置で区切る。**：［出典：[[20]](https://www.thr.mlit.go.jp/road/kouji/kouji-tunnel/tunnel-index.html)］ ［出典：[[20]](https://www.thr.mlit.go.jp/road/kouji/kouji-tunnel/tunnel-index.html)］
  
  
- 各坑門と道路中心線の交点の路面標高値を取得する（図M-9）。
トンネルの場合は各坑門と道路中心線の交点の路面標高値（路面上での標高）を取得する。路面標高値は、計測によって取得した標高値又は図面に記載された標高値とする。TunnelPartを用いてトンネルを延長方向に区切る場合は、各区切り位置の路面標高値も取得する。 
カルバート、シェッド及びシェルターの場合はこの工程は不要である。図M-9 — 道路中心線と坑口の中心線の交点の取得イメージ
- 構造物の最低標高値を算出する。
トンネルの最低標高値は、トンネル標準断面図に記載されたトンネルの深さとc）の路面標高値から算出する。TunnelPartを用いてトンネルを延長方向に区切る場合は、区切った区間ごとに最低標高値を算出する。 
カルバート、シェッド及びシェルターの最低標高値は、構造物の上からの正射影と地形との交線の最下部点の高さ（最も低い標高）を取得する。図M-10 — カルバート、シェッド及びシェルターの最低標高値の取得イメージ
- **構造物の最高標高値を算出する。
トンネルの最高標高値は、坑門工一般図又はトンネル標準断面図から坑門を含むトンネルの高さを取得し、b）の路面標高を用いて算出する。TunnelPartを用いてトンネルを延長方向に区切る場合は、区切った区間ごとに最高標高値を算出する。 
カルバート及びシェッド、シェルターの最高標高値は一般図又は航空測量成果（航空写真、航空レーザ点群）より取得する。**：［出典：[道路施設台帳サンプルデータD050](https://www.cbr.mlit.go.jp/architecture/kensetsugijutsu/download/index.htm)］
  
- b）で作成したポリゴンにd）で算出した構造物の最低標高値を付与する。
図M-12 — TunnelPartを用いない場合の側面イメージ（左）とTunnelPartを用いた場合の側面イメージ（右）
- f）で構造物の最低標高値を持ったポリゴンをe）で算出した構造物の最高標高値まで上向きに押し出し、立体とする。
図M-13 — TunnelPartを用いない場合の側面イメージ（左）とTunnelPartを用いた場合の側面イメージ（右）

トンネルモデル（LOD1）の作成例を図M-14に示す。

![Image](images/tocM_img016.png)

## M.10.1.2.3 作業手順（地下横断歩道）

- DMデータの地下横断歩道を外周とするポリゴンを作成する。
- 各出入口とa）の中心線の交点の路面標高値を取得する（図M-15）。
路面標高値は、計測によって取得した標高値又は図面に記載された標高値とする。図M-15 — 地下横断歩道の中心線と出入口の交点の取得イメージ
- **地下横断歩道の最低標高値を算出する。
最低標高値は、一般図に記載された地下横断歩道の深さとc）の路面標高値から算出する。**：［出典：[道路施設台帳サンプルデータD070](https://www.cbr.mlit.go.jp/architecture/kensetsugijutsu/download/index.htm)］
  
- a）で作成したポリゴンにc）で算出した地下横断歩道の最低標高値を付与する。
- d）で地下横断歩道の最低標高値を持ったポリゴンをb）で算出した路面標高値まで上向きに押し上げ、立体とする。

## M.10.1.3 LOD2

## M.10.1.3.1 原典資料

**表 M-28 — LOD2の原典資料**

|  | 水平位置 | 高さ | 上下面の形状 | 内部の形状 | 付属物等 |
| --- | --- | --- | --- | --- | --- |
| LOD2 | 以下のデータを使用する。トンネル標準断面図又は標準横断図都市計画図等のDMデータ地質平面･縦断図以下のいずれかのデータを一つ以上使用する。坑門工一般図航空写真 | 以下のデータを使用する。トンネル標準断面図又は標準横断図地質平面･縦断図縦断図 以下のいずれかのデータを一つ以上使用する。 a)坑門工一般図MMS点群航空レーザ点群航空写真から作成した点群 | 以下のデータを使用する。トンネル標準断面図又は標準横断図地質平面･縦断図縦断図以下のいずれかのデータを一つ以上使用する。坑門工一般図航空写真から作成した点群 | ― | ― |
|  | ← | ← | ← | ← | ← |

「高さ」の原典資料については「トンネル標準断面図又は標準横断図」、「地質平面･縦断図」、「縦断図」のいずれかに標高値が記載されている場合は、坑門工一般図又は測量成果を使用せずに作成することができる。

## M.10.1.3.2 作業手順（トンネル、カルバート、シェッド、シェルター）

- **トンネルモデル（LOD1）を高さの変化点で区切る。
トンネルの場合は、縦断面図の各測点毎で立体を区切る。カルバート、シェッド及びシェルターの場合は、一般図又は航空測量成果（航空写真、航空レーザ点群）から上下面の高さの変化点を特定し、立体を区切る。**：［出典：[[20]](https://www.thr.mlit.go.jp/road/kouji/kouji-tunnel/tunnel-index.html)］
  
- a）で区切った立体の頂点の高さを区切り位置の高さに変更する。
トンネルの場合は、縦断面図から各測点毎のトンネル底面の高さを取得し、区切り位置の底面高さとする。カルバート、シェッド及びシェルターの場合は、 一般図又は航空測量成果（航空写真、航空レーザ点群）から区切り位置の上下面の高さを取得し、区切り位置の頂点の高さをその高さに変更する。図M-18 — トンネル底面高さを反映後の側面イメージ
- **地質平面・縦断図から各測点間の設計パターン（断面形状）を特定する。
設計パターンには適用するトンネル標準断面図が記載されている。カルバート、シェッド及びシェルターの場合は、この工程は不要である。**：［出典：[[20]](https://www.thr.mlit.go.jp/road/kouji/kouji-tunnel/tunnel-index.html)］
  
- b）で高さを変更したモデルに対し、各測点に適用されるトンネル標準断面図から断面形状を再現する。カルバート、シェッド及びシェルターの場合は、この工程は不要である。
- d）の立体の境界面をRoofSurface、WallSurface、GroundSurfaceに区分する。ただし、RoofSurface及びGroundSurfaceがWallSurfaceと区別できない場合は、全てWallSurfaceとして区分する。
図M-20 — 断面形状を再現した後の側面イメージ

トンネルモデル（LOD2）の作成例を図M-21及び図M-22に示す。

![Image](images/tocM_img017.png)

![Image](images/tocM_img018.png)

LOD2で再現する坑門の形状は上面のみであり、トンネルと一体として作成する。また、トンネルの開口部は境界面を分けない。

## M.10.1.3.3 作業手順（地下横断歩道）

- トンネルモデル（LOD1）を高さの変化点で区切る。
地下横断歩道の場合は、一般図より構造物の底面及び上面の高さの異なる位置でトンネルモデル（LOD1）を区切る。
- a）で区切った立体の頂点の高さを区切り位置の高さに変更する。
地下横断歩道の場合は、一般図から区切り位置の構造物の底面及び上面の高さを取得し、それを区切り位置の高さとする。
- b）の立体の境界面をRoofSurface、WallSurface、GroundSurfaceに区分する。ただし、RoofSurface及びGroundSurfaceがWallSurfaceと区別できない場合は、全てWallSurfaceとして区分する。地下横断歩道の出入口はRoofSurfaceとする。

![Image](images/tocM_img019.png)

## M.10.1.4 LOD3

## M.10.1.4.1 原典資料

**表 M-29 — LOD3の原典資料**

|  | 水平位置 | 高さ | 上下面の形状 | 内部の形状 | 付属物等 |
| --- | --- | --- | --- | --- | --- |
| LOD3 | 以下のデータを使用する。トンネル標準断面図又は標準横断図都市計画図等のDMデータ地質平面･縦断図以下のいずれかのデータを一つ以上使用する。坑門工一般図航空写真MMS点群 | 以下のデータを使用する。トンネル標準断面図又は標準横断図地質平面･縦断図縦断図 以下のいずれかのデータを一つ以上使用する。 a)坑門工一般図MMS点群航空レーザ点群航空写真から作成した点群 | 以下のデータを使用する。トンネル標準断面図又は標準横断図地質平面･縦断図縦断図以下のいずれかのデータを一つ以上使用する。坑門工一般図航空写真から作成した点群 | ― | ― |
|  | ← | ← | ← | ← | ← |

「高さ」の原典資料については「トンネル標準断面図又は標準横断図」、「地質平面･縦断図」、「縦断図」のいずれかに標高値が記載されている場合は、坑門工一般図又は測量成果を使用せずに作成することができる。

## M.10.1.4.2 作業手順（トンネル、カルバート、シェッド、シェルター）

- TunnelInstallationを作成する。
トンネルの場合は、トンネルモデル（LOD2）の坑門とトンネル本体を分ける。坑門はトンネルモデル（LOD3）からTunnelInstallationとし、坑門の側面形状も再現する。また、連絡坑がある場合はトンネル標準断面図からその位置を特定し、TunnelInstallationとして追加取得する。カルバート、シェッド及びシェルターの場合は、TunnelInstallationに該当する付属物はないため、この工程は不要である。
- a）で編集を加えたモデルに対し、構造物の側面形状を再現する。
トンネルの場合は、LOD2の段階で各測点毎の断面形状を再現しているため、トンネル本体の側面形状が既に再現されている場合がある。カルバート、シェッド及びシェルターの場合は、一般図又は測量成果（航空写真、航空レーザ点群、MMS点群）より側面形状を再現する。シェッド及びシェルターの側面形状が柱形状となっている場合、柱間に開口部があるが一つの立体とするために仮想的に面を作成する。図M-24 — シェッド及びシェルターの側面の作成イメージ
- b）のモデルに対し、境界面の再区分を行う。
トンネル、カルバートの場合は、b）のモデルに対し坑口の開口部で境界面を分けて、その面をClosureSurfaceとする（ 図M-25）。
シェッド及びシェルターの場合かつ構造物の側面形状が柱形状となっている場合は、b）のモデルに対し坑口の開口部及び柱間の開口部で境界面を分けて、その面をClosureSurfaceとする（ 図M-26）。図M-25 — LOD3の境界面の区分イメージ（トンネル）図M-26 — LOD3の境界面の区分イメージ（シェッド及びシェルター）

トンネルモデル（LOD3）の作成例を図M-27及び図M-28に示す。

![Image](images/tocM_img020.png)

![Image](images/tocM_img021.png)

LOD3では坑門の側面形状も表現する。ClosureSurfaceは坑門の開口部ではなく、トンネル本体の開口部に作成する。

## M.10.1.4.3 作業手順（地下横断歩道）

- トンネルモデル（LOD2）から地下横断歩道の側面形状を表現する。
- a）のモデルに対し、境界面の再区分を行う
地下横断歩道の出入口で境界面を分けて、その面をClosureSurfaceとして作成する。

![Image](images/tocM_img022.png)

## M.10.1.5 LOD4.0

## M.10.1.5.1 原典資料

**表 M-30 — LOD4.0の原典資料**

|  | 水平位置 | 高さ | 上下面の形状 | 内部の形状 | 付属物等 |
| --- | --- | --- | --- | --- | --- |
| LOD4.0 | 以下のデータを使用する。トンネル標準断面図又は標準横断図都市計画図等のDMデータ地質平面･縦断図以下のいずれかのデータを一つ以上使用する。坑門工一般図航空写真MMS点群 | 以下のデータを使用する。トンネル標準断面図又は標準横断図地質平面･縦断図縦断図 以下のいずれかのデータを一つ以上使用する。 a)坑門工一般図MMS点群航空レーザ点群航空写真から作成した点群 | 以下のデータを使用する。トンネル標準断面図又は標準横断図地質平面･縦断図縦断図以下のいずれかのデータを一つ以上使用する。坑門工一般図航空写真から作成した点群 | 以下のいずれかのデータを一つ以上使用する。トンネル標準断面図及び地質平面･縦断図標準横断図及び地質平面･縦断図MMS点群LiderSLAM点群 | ― |
|  | ← | ← | ← | ← | ← |

「高さ」の原典資料については「トンネル標準断面図又は標準横断図」、「地質平面･縦断図」、「縦断図」のいずれかに標高値が記載されている場合は、坑門工一般図又は測量成果を使用せずに作成することができる。

## M.10.1.5.2 作業手順（トンネル、カルバート、シェッド、シェルター）

- トンネルモデル（LOD3）に対し、内部形状を作成する。
トンネルの場合、地質平面・縦断図から各測点間の設計パターン（断面形状）を特定し、標準断面図から壁の厚さ及び底面の厚さを取得する。取得した壁の厚さや底面の厚さから内部形状を形成する。 
なお、点群データにて内部形状の取得が可能な場合はMMS点群を用いて内部形状を作成してもよい。トンネル内部の消火設備等を格納する凹部である箱抜部は表現しない。 
カルバート、シェッド及びシェルターの場合、一般図又は点群データより内部形状を作成する。
- a）の内部形状の境界面をCeilingSurface、InteriorWallSurface、FloorSurface、ClosureSurfaceに区分する。
ただし、CeilingSurface及びFloorSurfaceがInteriorWallSurfaceと区別できない場合は、全てInteriorWallSurfaceとして区分する。図M-30 — LOD4の境界面の区分イメージ（シェッド及びシェルター）

トンネルモデル（LOD4.0）の作成例を図M-31及び図M-32に示す。

![Image](images/tocM_img023.png)

![Image](images/tocM_img024.png)

## M.10.1.5.3 作業手順（地下横断歩道）

- トンネルモデル（LOD3）に対し、内部形状を作成する。
一般図又は点群データから内部の形状を取得する。
- b）の内部形状の境界面をCeilingSurface、InteriorWallSurface、FloorSurface、ClosureSurfaceに区分する。
ただし、CeilingSurface及びFloorSurfaceがInteriorWallSurfaceと区別できない場合は、全てInteriorWallSurfaceとして区分する。

## M.10.1.6 LOD4.1

## M.10.1.6.1 原典資料

**表 M-31 — LOD4.1の原典資料**

|  | 水平位置 | 高さ | 上下面の形状 | 内部の形状 | 付属物等 |
| --- | --- | --- | --- | --- | --- |
| LOD4.1 | BIM/CIMモデル又は以下のデータを使用する。トンネル標準断面図又は標準横断図都市計画図等のDMデータ地質平面･縦断図 BIM/CIMモデル又は以下のいずれかのデータを一つ以上使用する。坑門工一般図航空写真MMS点群 | BIM/CIMモデル又は以下のデータを使用する。トンネル標準断面図又は標準横断図地質平面･縦断図縦断図 BIM/CIMモデル又は以下のいずれかのデータを一つ以上使用する。 a)坑門工一般図MMS点群航空レーザ点群航空写真から作成した点群 | BIM/CIMモデル又は以下のデータを使用する。トンネル標準断面図又は標準横断図地質平面･縦断図縦断図 BIM/CIMモデル又は以下のいずれかのデータを一つ以上使用する。坑門工一般図航空写真から作成した点群 | 以下のいずれかのデータを一つ以上使用する。トンネル標準断面図及び地質平面･縦断図標準横断図及び地質平面･縦断図MMS点群LiderSLAM点群BIM/CIMモデル | 以下のいずれかのデータを一つ以上使用する。MMS点群LiderSLAM点群非常用施設配置図及び非常用施設箱抜工図BIM/CIMモデル |
|  | ← | ← | ← | ← | ← |

「高さ」の原典資料については「BIM/CIMモデル」、「トンネル標準断面図又は標準横断図」、「地質平面･縦断図」、「縦断図」のいずれかに標高値が記載されている場合は、坑門工一般図又は測量成果を使用せずに作成することができる。

## M.10.1.6.2 作業手順（トンネル、カルバート、シェッド、シェルター）

- 短辺の実長が3m以上又は短辺の実長1m以上かつ面積3m2以上の内部の付属物を作成する。
トンネルモデル（LOD4.0）にMMS点群データを重畳表示（ 図M-33）し、ジェットファン等、短辺の実長が3m以上又は短辺の実長1m以上かつ面積3m2以上に該当する付属物の外形を取得しモデル化する。図M-33 — MMS点群データを重畳表示した例

トンネルモデル（LOD4.1）の作成例を図M-34に示す。

![Image](images/tocM_img025.png)

## M.10.1.6.3 作業手順（地下横断歩道）

- 短辺の実長が3m以上又は短辺の実長1m以上かつ面積3m2以上の内部の付属物を作成する。
トンネルモデル（LOD4.0）にMMS点群データ又はLiderSLAM点群を重畳表示し、手すり等、短辺の実長が3m以上又は短辺の実長1m以上かつ面積3m2以上に該当する付属物の外形を取得しモデル化する。

## M.10.1.7 LOD4.2

## M.10.1.7.1 原典資料

**表 M-32 — LOD4.2の原典資料**

|  | 水平位置 | 高さ | 上下面の形状 | 内部の形状 | 付属物等 |
| --- | --- | --- | --- | --- | --- |
| LOD4.1 | BIM/CIMモデル又は以下のデータを使用する。トンネル標準断面図又は標準横断図都市計画図等のDMデータ地質平面･縦断図 BIM/CIMモデル又は以下のいずれかのデータを一つ以上使用する。坑門工一般図航空写真MMS点群 | BIM/CIMモデル又は以下のデータを使用する。トンネル標準断面図又は標準横断図地質平面･縦断図縦断図 BIM/CIMモデル又は以下のいずれかのデータを一つ以上使用する。 a)坑門工一般図MMS点群航空レーザ点群航空写真から作成した点群 | BIM/CIMモデル又は以下のデータを使用する。トンネル標準断面図又は標準横断図地質平面･縦断図縦断図 BIM/CIMモデル又は以下のいずれかのデータを一つ以上使用する。坑門工一般図航空写真から作成した点群 | 以下のいずれかのデータを一つ以上使用する。トンネル標準断面図及び地質平面･縦断図標準横断図及び地質平面･縦断図MMS点群BIM/CIMモデル | 以下のいずれかのデータを一つ以上使用する。MMS点群非常用施設配置図及び非常用施設箱抜工図BIM/CIMモデル |
|  | ← | ← | ← | ← | ← |

「高さ」の原典資料については「BIM/CIMモデル」、「トンネル標準断面図又は標準横断図」、「地質平面･縦断図」、「縦断図」のいずれかに標高値が記載されている場合は、坑門工一般図又は測量成果を使用せずに作成することができる。

## M.10.1.7.2 作業手順（トンネル、カルバート、シェッド、シェルター）

- **LOD4.1モデルにMMS点群データを重畳表示し、作成したLOD4.0の内部の箱抜部や付属物を作成する。この際、作成する付属物は内部の固定された付属物を全て作成する。また、任意で可動する設備を作成できる。
トンネルの場合、非常用施設配置図（ 図M-35）及び非常用施設箱抜工図（図M-36）等を補足資料として使用できる。**：［出典：[[12]](https://www.thr.mlit.go.jp/road/kouji/kouji-tunnel/tunnel-index.html)］ ［出典：[[20]](https://www.thr.mlit.go.jp/road/kouji/kouji-tunnel/tunnel-index.html)］
  
  

トンネルモデル（LOD4.2）の作成例を図M-37に示す。

![Image](images/tocM_img026.png)

## M.10.1.7.3 作業手順（地下横断歩道）

- LOD4.1モデルにMMS点群データ又はLiderSLAM点群を重畳表示し、作成したLOD4.0の内部の箱抜部や付属物を作成する。
この際、作成する付属物は内部の固定された付属物を全て作成する。また、任意で可動する設備を作成する。

## M.10.2 作成上の留意事項

## M.10.2.1 延長の長いトンネルモデルの取り扱い

一つのトンネルは、一つのトンネルモデルとしてデータ作成することを基本とする。ただし、高速道路のトンネルのように延長の長いトンネルは、一つのモデルとして作成するとデータ量が膨大になる。そこで、延長の長いトンネルは、管理区間又は覆工スパンの境界により、トンネルモデルを区切ってもよい。

## M.10.2.2 行政界を跨ぐトンネルモデルの取り扱い

行政界を跨ぐトンネルモデルは、トンネルモデルを一つのオブジェクトとして作成するため、基本方針として標準製品仕様書ではトンネルモデルを行政界で区切らないとしている。行政界を跨ぐトンネルモデルは、これに関係する市区町村の3D都市モデルに重複して含めてよい。

## M.10.2.3 曲面を平面分割する場合の境界面のオブジェクトの単位

トンネルの壁面は曲面として構成されていることが多いが、3D都市モデルは平面（gml:Polygon）のみを対象とするため、tun:WallSurface等の境界面は、データセットが採用する地図情報レベルの水平及び高さの誤差の標準偏差に収まるよう、平⾯に分割しなければならない。

このとき、分割した各平面をtun:WallSurface等の境界面にするのではなく、分割後の複数の平面を集約し、元の曲面を近似した単一のtun:WallSurface等の境界面として記述すること。

## M.10.2.4 外形の推定

MMS等を用いた地上レーザ―計測によりトンネルモデルを作成する場合、計測できるのはトンネルの内部空間のみであり、トンネルの外側の面は作成できない。外側の面を作成するためには、外側の面の情報を含む原典資料を入手する必要があるが、これが入手できない場合は推定により作成する。具体的には、トンネル出入り口（坑口）の厚み（覆工厚）を計測し、内部空間の形状を包含するような外形を覆工厚分のバッファを外側に発生させることで取得する方法がある。この場合、品質属性（uro:DataQualityAttribute）の幾何オブジェクトの作成手法（uro:geometrySrcDesc）の値は「推定」とする。

