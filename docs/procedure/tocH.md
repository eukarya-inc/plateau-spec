# 附属書H 妥当な航路オブジェクト

## 附属書H （規定） 妥当な航路オブジェクト

## H.1 概要

本付属書では、「3D都市モデル標準製品仕様書」（以下、「標準製品仕様書」という）に適合したデータ製品について、「交通（航路）モデル」に従って作成されるべき都市オブジェクト（以下、「交通（航路）オブジェクト」という）が満たすべき要件と、妥当な交通（航路）オブジェクトを作成するための標準的な作業手順を示す。

**表 H-1 — H-1: 妥当な交通（航路）オブジェクト**

| ID | `/req/wwy` |
| --- | --- |
| 対象の種類 | 妥当な交通（航路）オブジェクトの要件 |
| 説明 | 航路の説明とLODの要件 |
| 規定 | 要件H-1: 航路記述のLOD対応条件要件H-2: uro:Waterwayの幾何座標一致条件要件H-3: uro:Waterwayの幾何座標一致条件要件H-4: LOD2 uro:Waterwayの空間属性一致条件 |

## H.2 航路の記述とLOD

## H.2.1 使用可能な地物型とLOD

航路とは、船舶の通路として法令で定める海域である。標準製品仕様書では、原則として、以下に示す港則法や海上交通安全法によって規定される航路を対象とする。

- 港則法施行規則第8条
- 海上交通安全法第2条

航路の記述には、i-URのUrban Objectモジュールに定義された、uro:Waterwayを使用する。
 uro:Waterwayは、CityGML3.0において、新たに交通（Transportaiton）モジュールに定義された地物型であるtran:Waterwayを、CityGML2.0においても使えるように、i-URにおいて拡張した地物型である。uro:Waterwayは、道路（tran:Road）や鉄道（tran:Railway）と同様に、交通複合体（tran:TransportationComplex）を継承し、詳細度（LOD）ごとに、使用すべき空間属性が異なる。

標準製品仕様書では、交通（航路）モデルのLODは、LOD0からLOD2までを対象とする。

**表 H-2 — H-1: 航路記述のLOD対応条件**

| ID | `/req/wwy/1` |
| --- | --- |
| 主題 | 妥当な交通（航路）データセットの要件 |
| 分類 | 要件分類H-1: 妥当な交通（航路）オブジェクト |
| 条文 | 航路の記述には、指定されたLODに対応する地物型及び空間属性を使用する。 |

航路（uro:Waterway）は、tran:TransportationComplexを継承していることから、tran:TrafficAreaとtran:AuxiliaryTrafficAreaの集まりによって構成される。tran:TrafficAreaは船舶が通行可能な領域であり、tran:AuxiliaryTrafficAreaはtran:TrafficAreaの機能を補助する地物である。しかし、航路は航行可能な区域のみが指定されていることから、航路の区域にはtran:AuxiliaryTrafficAreaに該当する領域は存在しない。そこで、標準製品仕様書ではtran:AuxiliaryTrafficAreaを対象外とする。

航路の各LODにおいて使用可能な地物型と空間属性を、表H-3に示す。

**表 H-3 — 交通（航路）モデルの記述に使用する地物型と空間属性**

| 地物型 | 空間属性 | LOD0 | LOD1 | LOD2 | LOD3 | 適用 |
| --- | --- | --- | --- | --- | --- | --- |
| uro:Waterway |  | ● | ● | ● |  | LOD0、LOD1及びLOD2を対象とする。 |
| ↑ | tran:lod0Network | ● |  |  |  |  |
| ↑ | tran:lod1MultiSurface |  | ● |  |  |  |
| ↑ | tran:lod2MultiSurface |  |  | ● |  |  |
| ↑ | tran:lod3MultiSurface |  |  |  |  |  |
| tran:TrafficArea |  |  |  | ● |  |  |
| ↑ | tran:lod2MultiSurface |  |  | ● |  |  |
| ↑ | tran:lod3MultiSurface |  |  |  |  |  |
| tran:AuxiliaryTrafficArea |  |  |  |  |  | 対象としない。 |
| ↑ | tran:lod2MultiSurface |  |  |  |  |  |
| ↑ | tran:lod3MultiSurface |  |  |  |  |  |
| ●：必須■：条件付必須〇：任意（ユースケースに応じて要否を決定してよい） | ← | ← | ← | ← | ← | ← |

## H.2.2 交通（航路）モデルのLOD

交通（航路）モデル（LOD0）では、航路の形状をネットワークとして表現し、交通（航路）モデル（LOD1）及び交通（航路）モデル（LOD2）では面として表現する。交通（航路）モデル（LOD1）では航路内を区分できず、交通（航路）モデル（LOD2）では航路内を区分できる。CityGMLでは、LODの枠組みとそこで使用可能な地物型及び空間属性をデータ構造として定義しているが、何を取得し記述すべきというデータの内容の定義は行っていない。これにより、同じLODであっても、ユースケースやデータ作成者によってその詳細度が大きく異なる可能性がある。

そこで、標準製品仕様書では、その用途やデータ作成の難易度を考慮し、3D都市モデルにおける交通（航路）モデルのLODを図H-1のように整理している。

![Image](images/tocH_img001.png)

交通（航路）モデルは、高さを持たない。航路オブジェクトを3次元の地形データに貼り付けることで3次元的に表示して利用することを想定している。

## H.2.3 航路の空間属性

uro:Waterwayの空間属性は、いずれのLODにおいても、同一のLODにおける航路の連続性を担保する必要がある。

**表 H-4 — H-2: uro:Waterwayの幾何座標一致条件**

| ID | `/req/wwy/2` |
| --- | --- |
| 主題 | 妥当な交通（航路）データセットの要件 |
| 分類 | 要件分類H-1: 妥当な交通（航路）オブジェクト |
| 条文 | 連続するuro:Waterwayの幾何オブジェクトは、同一のLODにおいて、その境界の座標を一致させなければならない。 |

## H.2.3.1 LOD0

交通（航路）モデル（LOD0）では、航路（uro:Waterway）の形状を線として記述する。このとき、線はgml:GeometricComplexを用いて記述する。

## H.2.3.2 LOD1

交通（航路）モデル（LOD1）では、航路（uro:Waterway）の形状を面として記述する。このとき、面の境界は法令により指定された航路の区域の境界となる。交通（航路）オブジェクトは、以下の場所で区切る。

**表 H-5 — H-3: uro:Waterwayの幾何座標一致条件**

| ID | `/req/wwy/3` |
| --- | --- |
| 主題 | 妥当な交通（航路）データセットの要件 |
| 分類 | 要件分類H-1: 妥当な交通（航路）オブジェクト |
| 条文 | uro:Waterwayのオブジェクトは、以下に示す場所で区切る。 |
| A | 二つ以上の航路が交わる部分 |

## H.2.3.3 LOD2

交通（航路）モデル（LOD2）では、航路（uro:Waterway）の形状を面として記述する。LOD2では、uro:Waterwayはtran:TrafficAreaに区分できる。このとき、uro:Waterwayの空間属性は、これを構成するtran:TrafficAreaの空間属性の集まりとなる。

**表 H-6 — H-4: LOD2 uro:Waterwayの空間属性一致条件**

| ID | `/req/wwy/4` |
| --- | --- |
| 主題 | 妥当な交通（航路）データセットの要件 |
| 分類 | 要件分類H-1: 妥当な交通（航路）オブジェクト |
| 条文 | LOD2におけるuro:Waterwayの空間属性は、これを構成するtran:TrafficAreaの空間属性の集まりと一致しなければならない。 |

tran:TrafficAreaは、法令により指定された船舶の航行方向により区分する。航行方向の指定が無い場合、交通（航路）モデル（LOD2）においてtran:TrafficAreaの形状と、uro:Waterwayの形状は等しくなり、これは交通（航路）モデル（LOD1）と一致する。

## H.2.4 航路の主題属性

uro:Waterwayの主題属性には、uro:Waterwayに定義された属性と、これが継承するtran:TransportationComplexに定義された属性がある。

なお、uro:Waterwayがtran:_TransportationObjectから継承するuro:tranDmAttributeは、数値地形図との互換性を保つための情報を格納するための属性であり、航路は数値地形図では表現されないことから、標準製品仕様書では使用しない。

## H.2.4.1 航路詳細属性（uro:waterweyDetailAttribute）

航路の詳細な属性として、航路の管理番号、進行方向、幅員、延長、航法、計画水深、速力制限、対象船型を定義する。

幅員が幅をもって指定されている場合は、最小値（uro:minimumWidth）及び最大値（uro:maximumWidth）の両方を入力する。特定の値が指定されている場合は、最小値（uro:minimumWidth）のみを入力する。

## H.2.4.2 データ品質属性（uro:DataQualityAttribute）

航路のデータ作成に使用した原典資料を記述するための属性である。3D都市モデルでは、データ集合全体としての品質はメタデータに記録する。しかしながら、メタデータでは、個々のデータに対して位置正確度や適用したLOD等の品質を記述することが困難である。

そこで、標準製品仕様書では、個々のデータに対してデータ品質に関する情報を記述するための属性として、「データ品質属性」（uro:DataQualityAttribute）を定義している。データ品質属性は、属性としてデータ作成に使用した原典資料の地図情報レベル、その他原典資料の諸元及び精緻化したLODをもつ。

3D都市モデルに含まれる全ての交通（航路）モデルは、このデータ品質属性を必ず作成しなければならない。ただし、航路（uro:Waterway）に対してデータ品質属性を付与することはできるが、これを構成する交通領域（tran:TrafficArea）や交通補助領域（tran:AuxiliaryTrafficArea）にデータ品質属性を付与することはできない。

## H.2.4.3 施設管理のための属性

施設管理のための属性は、港湾施設及び漁港施設、河川管理施設や公園管理施設等の施設管理に必要な情報を定義した属性である。施設管理のための属性は以下のデータ型を用いて記述する。

## H.2.4.3.1 施設分類属性（uro:FacilityTypeAttribute）

uro:FacilityTypeAttributeは、各分野で定める施設の区分を記述するためのデータ型である。CityGMLは、地物型を物体としての性質に着目して定義し、機能や用途は属性で区分している。これにより、都市に存在する様々な地物を、分野を問わず、網羅的に、かつ、矛盾が無く表現することを目指している。一方、各分野には独自の施設の区分がある。この区分は当該分野での施設管理に必要な情報であるが、CityGMLの地物型の区分とは一致しない。そこで、これらの地物型に分野独自の区分を付与するためにこのデータ型を用いる。uro:FacilityTypeAttributeは、二つの属性をもつ。uro:classは分野を特定するための属性である。またuro:functionは、uro:classにより特定した分野における施設の区分を示す。

標準製品仕様書では、港湾施設管理、漁港施設管理及び公園施設管理のそれぞれの分野についてはuro:functionの区分を示している。その他の分野における区分が必要となる場合はuro:classへの分野の追加も含め、拡張製品仕様書において追加できる。

## H.2.4.3.2 施設識別属性（uro:FacilityIdAttribute）

uro:FacilityIdAttributeは、施設の位置を特定する情報及び施設を識別する情報を記述するためのデータ型である。uro:FacilityIdAttributeは、施設を識別するための情報として、識別子（uro:id）や正式な名称以外の呼称（uro:alternativeName）に加え、施設の位置を示すための、都道府県（uro:prefecture）、市区町村（uro:city）及び開始位置の経緯度（uro:startLat、uro:startLong）を属性としてもつ。

## H.2.4.3.3 施設詳細属性（uro:FacilityAttribute）

uro:FacilityAttributeは、各分野において施設管理に必要となる情報を記述するためのデータ型である。uro:FacilityAttributeは、抽象クラスであり、これを継承する具象となるデータ型に、施設の区分毎に必要となる情報を属性として定義している。

標準製品仕様書では、港湾施設、漁港施設及び公園施設について、細分した施設の区分ごとにデータ型を定義している。また、施設に関する工事や点検の状況や内容を記述するためのデータ型（uro:MaintenanceHistoryAttribute）を定義している。

## H.3 標準的な作業手順

## H.3.1 幾何オブジェクトの作成

作成に必要となる原典資料を表H-7に示す。

**表 H-7 — 原典資料一覧**

|  | 水平位置 | 航行区分 |
| --- | --- | --- |
| LOD0 | 以下のいずれかのデータを一つ以上用いる港則法施行規則の別表第二海交法施行令の別表第二海しる（海洋状況表示システム）の航路データ電子海図の航路データ[国土数値情報の航路データ](https://nlftp.mlit.go.jp) | ― |
| LOD1 | 以下のいずれかのデータを一つ以上用いる港則法施行規則の別表第二海交法施行令の別表第二海しる（海洋状況表示システム）の航路データ電子海図の航路データ[国土数値情報の航路データ](https://nlftp.mlit.go.jp) | ― |
| LOD2 | 以下のいずれかのデータを一つ以上用いる港則法施行規則の別表第二海交法施行令の別表第二海しる（海洋状況表示システム）の航路データ電子海図の航路データ[国土数値情報の航路データ](https://nlftp.mlit.go.jp) | 以下のいずれかのデータを一つ以上用いる電子海図の航路データ[国土数値情報の航路データ](https://nlftp.mlit.go.jp) （航路向き） |
| 注記1H.3.1の注記1海しる（海洋状況表示システム）とは、海上保安庁が提供するWebGISサービスである。海しるではAPIが提供されており航路データは「海交法航路」「港則法航路」として取得が可能である。（海しるAPI： [https://portal.msil.go.jp/apis](https://portal.msil.go.jp/apis) ）注記2H.3.1の注記2電子海図の航路データとは、海上保安庁が作成する「航海用電子海図」である。注記3H.3.1の注記3[国土数値情報の航路データ](https://nlftp.mlit.go.jp)は地図情報レベルが25000である。このデータを使用する場合は、メタデータの識別情報に含まれる空間解像度の値に「25000」を追加する。電子海図の航路データを使用する場合は原典資料の縮尺に合わせて空間解像度を追加する。 | ← | ← |

## H.3.1.1 LOD0

## H.3.1.1.1 原典資料

**表 H-8 — LOD0の原典資料**

|  | 水平位置 | 航行区分 |
| --- | --- | --- |
| LOD0 | 以下のいずれかのデータを一つ以上用いる港則法施行規則の別表第二海交法施行令の別表第二海しる（海洋状況表示システム）の航路データ電子海図の航路データ[国土数値情報の航路データ](https://nlftp.mlit.go.jp) | ― |

## H.3.1.1.2 作業手順

- 航路データから中心線を作成する。
原典資料として使用する航路データは、航路範囲の外周線である。そこで、GISソフト等を用いて外周線から航路の中心線を作成する。図H-2 — 外周線データから中心線を作成するイメージ

## H.3.1.2 LOD1

## H.3.1.2.1 原典資料

**表 H-9 — LOD1の原典資料**

|  | 水平位置 | 航行区分 |
| --- | --- | --- |
| LOD1 | 以下のいずれかのデータを一つ以上用いる港則法施行規則の別表第二海交法施行令の別表第二海しる（海洋状況表示システム）の航路データ電子海図の航路データ[国土数値情報の航路データ](https://nlftp.mlit.go.jp) | ― |

## H.3.1.2.2 作業手順

- 航路データ（航路範囲の外周線）から面データを作成する。高さは0とする。図H-3 — 外周線データから面データを作成するイメージ

作成例を以下に示す。

![Image](images/tocH_img002.png)

## H.3.1.3 LOD2

## H.3.1.3.1 原典資料

**表 H-10 — LOD2の原典資料**

|  | 水平位置 | 航行区分 |
| --- | --- | --- |
| LOD2 | 以下のいずれかのデータを一つ以上用いる港則法施行規則の別表第二海交法施行令の別表第二海しる（海洋状況表示システム）の航路データ電子海図の航路データ[国土数値情報の航路データ](https://nlftp.mlit.go.jp) | 以下のいずれかのデータを一つ以上用いる電子海図の航路データ[国土数値情報の航路データ](https://nlftp.mlit.go.jp)（航路向き） |

## H.3.1.3.2 作業手順

- 交通（航路）モデル（LOD0）もしくは交通（航路）モデル（LOD1）の作成時に使用した[国土数値情報の航路データ](https://nlftp.mlit.go.jp)の属性情報から、航路向き情報を得て進行方向を確認する。電子海図から作成する場合は電子海図の図式から航路の向きを判別する。図H-5 — 国土数値情報（航路）の属性情報の参考図
- 進行方向が両方向の場合、交通（航路）モデル（LOD1）のポリゴンを交通（航路）モデル（LOD0）の中心線で分割する。図H-6 — ポリゴン分割のイメージ
- 進行方向の指定なし又は一方方向の場合は、ポリゴンは分割せずに交通（航路）モデル（LOD1）と同じものとする。

作成例を以下に示す。

![Image](images/tocH_img003.png)

## H.3.2 作成上の留意事項

## H.3.2.1 国土数値情報の航路データの利用について

法令の改正に伴い、[国土数値情報の航路データ](https://nlftp.mlit.go.jp)作成時点から区域が変更されている場合があるため、国土数値情報の利用にあたっては、整備対象とする航路に変更がないか確認する。

