# C.3.1.2 LOD1

## C.3.1.2 LOD1

建築物モデル（LOD1）では、建築物の形状を立体により表現する。このとき、建築物オブジェクトは、建築物モデル（LOD1）の定義に従ったものでなければならない。

**表 C-6 — C-4: 建築物のLOD1形状定義**

| ID | `/req/bldg/4` |
| --- | --- |
| 主題 | 妥当な建築物データセットの要件 |
| 分類 | 要件分類C-1: 妥当な建築物オブジェクト作成 |
| 条文 | 建築物のLOD1の形状は、建築物モデル（LOD1）の定義に従う。 |

建築物モデル（LOD1）は、LOD0で作成されたbldg:lod0RoofEdge又はbldg:lod0FootPrintにより作成された建築物の外周を示す平面に、一定の高さで上向きに押し出した角柱として表現したものである（図C-2）。
平面に一律の高さを与えるため、上下の面は水平となり、側面は垂直となる。

![Image](images/tocC_03_01_02_img001.png)

**表 C-7 — C-5: LOD1の空間属性の条件**

| ID | `/req/bldg/5` |
| --- | --- |
| 主題 | 妥当な建築物データセットの要件 |
| 分類 | 要件分類C-1: 妥当な建築物オブジェクト作成 |
| 条文 | LOD1で建築物を記述する場合には、bldg:lod1Solidで示される幾何形状に加え、LOD0の幾何形状（bldg:lod0RoofEdge又はbldg:lod0FootPrint）も、空間属性としてもたなければならない。 |

CityGMLでは、LOD0の建築物の空間属性として、屋根の外形線を表すbldg:lod0RoofEdgeと、建築物の外壁面と地表面との境界線によるbldg:lod0FootPrintが用意されている。両者のいずれを使ってもよい。ただし、この幾何形状を使用してLOD1の立体を作成することから、元となるLOD0の幾何形状を同時に保持しておく。

LOD0の建築物の空間属性には、2次元のGISデータを使用できる。ただし、2次元のGISデータの構造が
妥当な幾何オブジェクトの要件（ 附属書B）に適合しない場合は、GISデータを修正する必要がある。

例えば、図C-3は、内周と外周が一筆書きによりつながっているGISデータをLOD0の建築物の空間属性として使用し、 LOD1に押し出した立体である。 
内周と外周が一筆書きによりつながっている面は、gml:Polygonの要件に適合しないため、このような外形データを押し出したLOD1の立体もCityGMLの要件に適合しない。

![Image](images/tocC_03_01_02_img002.png)

**表 C-8 — C-6: LOD0幾何形状の妥当性**

| ID | `/req/bldg/6` |
| --- | --- |
| 主題 | 妥当な建築物データセットの要件 |
| 分類 | 要件分類C-1: 妥当な建築物オブジェクト作成 |
| 条文 | LOD1で建築物を記述する場合には、これに使用するLOD0の幾何形状（bldg:lod0RoofEdge又はbldg:lod0FootPrint）が、妥当な幾何オブジェクトでなければならない。 |

LOD1の下面の高さは以下の要件を満たさなければならない。

**表 C-9 — C-7: 建築物の下面高さの基準（LOD1）**

| ID | `/req/bldg/7` |
| --- | --- |
| 主題 | 妥当な建築物データセットの要件 |
| 分類 | 要件分類C-1: 妥当な建築物オブジェクト作成 |
| 条文 | LOD1で作成する建築物の下面の高さは、以下のいずれかとする。 |
| A | 建築物の下面の絶対標高 |
| B | LOD0で作成する水平図形と地形モデルとの交線の最下部点の高さ（最も低い標高） |

LOD1で建築物を記述する場合、下面の高さは、図C-4に示す二つの方法のいずれかにより決定する。建築物に地階が存在し、その最も低い高さが得られる場合にはその高さを使用する。地階の高さについての情報が得られない場合には、地形モデルとLOD0の平面形状との重ね合わせにより、最も低い点の高さを取得し、この値を使用する。

![Image](images/tocC_03_01_02_img003.png)

地形モデルとLOD0の平面形状との重ね合わせにより最も低い点の高さを取得する方法を選択した場合に、建築物のLOD0の平面形状の範囲で地形モデルが欠落している場合は、以下の手順により建築物の下面の高さを取得する。

　

- 地形モデルの欠落部が水部であり、かつ、LOD0の平面形状の範囲の地形モデルが全て欠落している場合は、地形モデルの欠落部を内挿により補完し、補完後の地形モデルとLOD0の平面形状の重ね合わせにより、最も低い点の高さを取得する。
- 地形モデルの欠落部が水部であり、かつ、LOD0の平面形状の範囲の地形モデルが一部欠落している場合は、一部欠落している地形モデルとLOD0の平面形状の重ね合わせにより、重なる部分の地形モデルの中で最も低い点の高さを取得する。
- 地形モデルの欠落部が水部以外の場合は、航空レーザ点群又は航空写真を用いた三次元図化を行い、ブレークラインを取得する。取得したブレークラインを用いて地形モデルの欠落部分を内挿補完し、補完後の地形モデルとLOD0の平面形状の重ね合わせにより、最も低い点の高さを取得する。

LOD1では建築物の上面及び下面は水平となる。つまり、建築物には一律の高さが付与される。しかしながら、実世界での建築物の多くは複雑な屋根形状を有し、高さは一律ではない。また、使用する資料により、得られる高さは様々である。そこで、LOD1で建築物を作成する場合に、その高さは以下の要件を満たすこととする。

**表 C-10 — C-8: LOD1の上面高さの基準**

| ID | `/req/bldg/8` |
| --- | --- |
| 主題 | 妥当な建築物データセットの要件 |
| 分類 | 要件分類C-1: 妥当な建築物オブジェクト作成 |
| 条文 | LOD1で作成する建築物の上面の高さには、「LOD0の平面の内側に含まれる点群データの中央値」を使用することを原則とする。 |

航空レーザ測量等により取得された点群データを使用する場合、建築物の形状（LOD0による平面）には複数の点が存在することが想定される。このような場合には、統計処理により求めた代表値を建築物の上面の高さとして与える。統計処理により求める代表値として表C-11がある。

**表 C-11 — 統計処理に求める建物高さの代表値**

| 代表値 | 算出方法 |
| --- | --- |
| 最高値 | LOD0の平面に含まれる点群データのうち、最も高さの高い点の値。屋根が傾斜している場合や多層型の屋根形状の場合、その一番高いところの高さを示す。 |
| 中央値 | LOD0の平面に含まれる点群データにおいて、データを小さい順に並べたとき中央に位置する値。 |
| 平均値 | LOD0の平面に含まれる点群データにおいて、データの分布の重心を表す値。 |
| 最頻値 | LOD0の平面に含まれる点群データにおいて、最も頻繁に出現する値。 |
| 最低値 | LOD0の平面に含まれる点群データのうち、最も高さの低い点の高さ。屋根が傾斜している場合や多層型の屋根形状の場合、その一番低いところの高さを示す。 |

このうち、中央値は平均値と異なり、上下に極端にはずれた数値の影響を受けにくいとされる。そのため、標準製品仕様書では、多目的な利用を想定し、中央値の採用を推奨している。なお、国土地理院による「[建物三次元データ作成マニュアル（案）](https://www.gsi.go.jp/kankyochiri/Laser_gijutusiryo.html)」では、航空レーザ測量データ及び建物ポリゴンデータを用いて、建物のポリゴンデータに高さ（中央値）を与える手順が示されている。そのため、LOD1の作成において参考にできる。

計測以外の方法で高さを取得することもできる。具体的には、都市計画基礎調査の建物利用現況に含まれる「高さ」や建築確認申請書類等に記載される「建築物の高さ」を使用してもよい。また、そのほかの高さの取得方法として、都市計画基礎調査等に含まれる建物階数を使用して建築物の高さを推定する方法がある。これは、階高（3mや4m）に建物階数を乗算し、建築物の高さとする方法である。点群データや建築確認申請書類等の既存資料が得られない場合に、便宜的な対応として、このような推定を行うことも考えられる。

建築物に一律の高さを与える場合、いずれの高さを建築物の上面の高さとするかは、ユースケースや使用可能な資料により異なる。そこで、本作業手順では、建築物の上面の高さには原則としてLOD0の平面の内側に含まれる点群データの中央値を採用することとしている。

なお、ユースケースによっては、一律の高さが与えられたLOD1の建築物では要求を満たさない場合がある。その場合には、建築物の幾何形状をより現実に近い形状で記述可能なLOD2を適用する、又は必要な「高さ」を主題属性として建築物に定義する。標準製品仕様書では、建築物の高さ制限の確認を行うことを目的として、主題属性に建築基準法施行令に基づく「建築物の高さ」及び「軒の高さ」を追加している。これら以外の高さが必要な場合には汎用属性を用いて追加することができる。

また、建築物の主題属性である「計測高さ」は、計測により取得した建築物の最も低い位置から最も高い位置までの高さであり、LOD1を中央値や平均値等で作成した場合には、この高さと「計測高さ」とは一致しない場合がある。

ここで、LOD1では、建築物の下面の高さは接地している標高とし、上面の高さは建築物の外形線内に含まれる点群データの標高の中央値とすることが基本となる。このとき、下面の高さと上面の高さを取得する原典資料が異なると、建築物の高さが原典資料の累積誤差により実際と乖離する恐れがある。よって、異なる原典資料を使用する場合には、累積誤差を軽減する策をとる必要がある。

**表 C-12 — C-9: LOD1の高さ取得における誤差対策**

| ID | `/req/bldg/9` |
| --- | --- |
| 主題 | 妥当な建築物データセットの要件 |
| 分類 | 要件分類C-1: 妥当な建築物オブジェクト作成 |
| 条文 | LOD1で作成する建築物の下面の高さを取得する原典資料と上面の高さを取得する原典資料が異なる場合には、必要に応じて累積誤差を軽減する策をとる。 |

例：点群データを用いて建築物の相対的な高さを求め、地形モデルから求めた標高にこの高さを加えて建築物の高さを求める。

![Image](images/tocC_03_01_02_img004.png)

