# 5.3.2 作業上の留意事項

## 5.3.2 作業上の留意事項

建築物等の都市オブジェクトの作成においては、附属書Cから附属書Uに示す妥当な都市オブジェクトの要件を満たすこと。
以下に、本作業で生じうるエラーに対する留意事項を示す。

**表 5-7 — 25: データ型の整合性**

| ID | `/att/quality/4` |
| --- | --- |
| 主題 | 標準作業手順 |
| 分類 | 要件分類4: 3D都市モデル作成手順と品質評価の留意事項 |
| 条文 | 製品仕様では、データの値の型が厳密に定義されている。そのため、原典資料により得られた情報と型が一致しない場合には、定義された型に合わせて修正する。日付の記述には、JIS X0301により定義された、拡張形式による暦日付の完全表記（YYYY-MM-DD）を使用する。正しい記述例： 2020-04-01誤った記述例：令和2年4月1日（西暦で記載しなければならない）  2020-04（年、月、日の組み合わせでなければならない）  2020/04/01（年と月、月と日はハイフンでつながなければならない） 不明（不明な場合は、0001-01-01を入れる） 令和2年4月（年月のみ分かる場合は、YYYY-MM-01とするため、2020-04-01とする）コード型の属性におけるコードの記述は、コードリストに示されたコードと一致させる。原典資料では、文字列として入力されていることが多いため、半角・全角の区分が混在している場合や、定義されたコード以外が入力されている場合がある。あらかじめ原典資料に含まれるコードを抽出し、作成したコードリストと照合させ、必要に応じてコードの変換又はコードリストへの反映を行う。単位付き数値型の属性の値を記述する際は、原典資料の単位と拡張製品仕様書において指定した単位を確認する。原典資料で使用されている数値の単位と拡張製品仕様書で使用する単位が異なる場合は、数値の変換が必要となる。 |

**表 5-8 — 26: 不整合の対処方法**

| ID | `/att/quality/5` |
| --- | --- |
| 主題 | 標準作業手順 |
| 分類 | 要件分類4: 3D都市モデル作成手順と品質評価の留意事項 |
| 条文 | 幾何オブジェクトは存在するが、記述すべき属性が既存資料等に無い、あるいは記述すべき属性が既存資料等に存在するが、該当する場所に幾何オブジェクトが無い、等の不整合が発見された場合には、3.4において決定した対処方法に従う。 |

**表 5-9 — 27: 建築物の属性「uro:city」の必須記述**

| ID | `/att/quality/6` |
| --- | --- |
| 主題 | 標準作業手順 |
| 分類 | 要件分類4: 3D都市モデル作成手順と品質評価の留意事項 |
| 条文 | 建築物の属性uro:city（市区町村）は、必ず記述する。都市ごとに建築物の表示／非表示を切り替える等、建築物の大まかな位置を把握するために使用されるため、uro:cityは必ずデータを作成する。政令指定都市の場合は、「区」に該当するコードを選択する。 |

**表 5-10 — 28: 建築物の用途列挙**

| ID | `/att/quality/7` |
| --- | --- |
| 主題 | 標準作業手順 |
| 分類 | 要件分類4: 3D都市モデル作成手順と品質評価の留意事項 |
| 条文 | 複合的な用途を有する建築物について、それぞれの用途を記述したい場合にはbldg: usageを複数列挙する。複数の用途を列挙する場合は、主たる用途を最初に記述する。 |

**表 5-11 — 29: コード型属性の追加**

| ID | `/att/quality/8` |
| --- | --- |
| 主題 | 標準作業手順 |
| 分類 | 要件分類4: 3D都市モデル作成手順と品質評価の留意事項 |
| 条文 | 建築物以外の地物型にコード型の属性を追加する場合には、汎用属性セットにより、コードだけではなく、参照するコードリストの所在を対として追加する。建築物以外の地物に属性を追加する仕組みとして、汎用属性（gen:genericAttribute）がある。しかしながら、汎用属性には、文字列型、数値型等があるもののコード型はない。そこで、コード型の属性を追加する場合には、汎用属性セットにより、コードだけではなく、参照するコードリストの所在を対として追加する。汎用属性は、コードを記述する文字列型の汎用属性（name=”code”とする）と、コードが参照するコードリストの所在を記述する文字列型の汎用属性（name=”codeSpace”）を作成し、これらを汎用属性セットにより束ねる。コードに対応するコードリストを必ず作成する。 |

**表 5-12 — 30: 不明値の指定方法**

| ID | `/att/quality/9` |
| --- | --- |
| 主題 | 標準作業手順 |
| 分類 | 要件分類4: 3D都市モデル作成手順と品質評価の留意事項 |
| 条文 | 属性の値が不明である場合は、属性の型ごとに指定された不明を表す値を入力する。属性の値が不明である場合は、属性の型ごとに指定された不明を表す値（表5-13）を入力する。ただし、コード値（gml:CodeType）及び真偽値（xs:boolean）については、以下とする。真偽値（xs:boolean）は、はtrue又はfalseのみを値として取るため、属性を省略する。コード値（gml:CodeType）は、不明を表すコードが定義されている場合はこれを入力し、不明を表すコードが定義されていない場合は、属性を省略する。ただし、不明値の入力が必須の場合は、指定のコードリストを拡張し、不明値を示すコードを追加することを基本とする。 |

**表 5-13 — 属性値が不明な場合の対応**

| 属性の型 | 不明な場合の対応 |
| --- | --- |
| xs:string | Nullと入力する。（半角英文字） |
| xs:integer | -9999と入力する。 |
| xs:double | -9999と入力する。 |
| xs:date | 年月日が分からない場合は、0001-01-01と入力する。年のみ分かる場合はYYYY-01-01とし、年月のみ分かる場合はYYYY-MM-01とする。 |
| xs:boolean | 属性を省略する。 |
| xs:gYear | 0001と入力する。 |
| xs:nonNegativeInteger | 9999と入力する。 |
| gml:MeasureType, gml:LengthType | 値は-9999とし、単位は属性ごとに指定された単位を入力する。 |
| gml:MeatureOrNullListType | Null値の定義域にunknownを指定する。 |
| xs:anyURI | Nullと入力する。（半角英文字） |

　

注記5.3.2の注記必須ではない属性は省略できる。そのため、属性値が不明な場合は属性を省略することもできる。

ただし、属性を省略すると、不明だからデータがないのか、データが漏れている（エラー）なのかを区別できない。そこで、作成対象とするデータについては、属性値が不明な場合は表5-13に示す不明を表す値を入力する。

**表 5-14 — 31: NULL値と不明値の変換**

| ID | `/att/quality/10` |
| --- | --- |
| 主題 | 標準作業手順 |
| 分類 | 要件分類4: 3D都市モデル作成手順と品質評価の留意事項 |
| 条文 | 原典資料におけるNULL値や不明値の取り扱いに注意する。原典資料がGISデータである場合、GIS独自のデータ形式の仕様により、NULL値の取り扱いが異なる。例えば、数値型の属性についてデータが無い場合に、「0」が入力されていることがある。この「0」はデータが無いことを意味するため、NULL値として取り扱うべきである。値が不明な場合に、各原典資料の定義に従い「不明」や「9999」といった不明であることを示す文字列又は数値が入力されている。これらの不明値は、標準製品仕様書のデータ型やコードリストの定義に従い変換すること。例えば、xs:gYear型（年）の値が不明な場合に、原典資料では「9999」となっていたとする。標準製品仕様書では、xs:gYear型（年）の値が不明な場合には、「0001」とするよう定められている。よって、「9999」は「0001」に変換しなくてはならない。 |

**表 5-15 — 32: 主題属性の品質記録**

| ID | `/att/quality/11` |
| --- | --- |
| 主題 | 標準作業手順 |
| 分類 | 要件分類4: 3D都市モデル作成手順と品質評価の留意事項 |
| 条文 | 主題属性の作成に関する品質情報を、都市オブジェクト毎に記録する。全ての都市オブジェクトは、データの品質に関する情報を記録するデータ品質属性（uro:DataQualityAttribute）を作成しなければならない。このデータ品質属性は、主題属性に関する品質として以下の属性をもつ。主題属性に使用した原典資料の種類都市オブジェクトごとに、これらの情報を記録すること。 |

