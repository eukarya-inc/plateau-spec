# C.3.1 建築物の空間属性

## C.3.1 建築物の空間属性

## C.3.1.1 LOD0

建築物モデル（LOD0）では、建築物の形状を面により表現する。このとき、建築物オブジェクトは、建築物モデル（LOD0）の定義に従ったものでなければならない。

**表 C-5 — C-3: 建築物のLOD0形状定義**

| ID | `/req/bldg/3` |
| --- | --- |
| 主題 | 妥当な建築物データセットの要件 |
| 分類 | 要件分類C-1: 妥当な建築物オブジェクト作成 |
| 条文 | 建築物のLOD0の形状は、建築物モデル（LOD0）の定義に従う。 |

## C.3.1.2 LOD1

建築物モデル（LOD1）では、建築物の形状を立体により表現する。このとき、建築物オブジェクトは、建築物モデル（LOD1）の定義に従ったものでなければならない。

**表 C-6 — C-4: 建築物のLOD1形状定義**

| ID | `/req/bldg/4` |
| --- | --- |
| 主題 | 妥当な建築物データセットの要件 |
| 分類 | 要件分類C-1: 妥当な建築物オブジェクト作成 |
| 条文 | 建築物のLOD1の形状は、建築物モデル（LOD1）の定義に従う。 |

建築物モデル（LOD1）は、LOD0で作成されたbldg:lod0RoofEdge又はbldg:lod0FootPrintにより作成された建築物の外周を示す平面に、一定の高さで上向きに押し出した角柱として表現したものである（図C-2）。
平面に一律の高さを与えるため、上下の面は水平となり、側面は垂直となる。

![Image](images/tocC_03_01_img001.png)

**表 C-7 — C-5: LOD1の空間属性の条件**

| ID | `/req/bldg/5` |
| --- | --- |
| 主題 | 妥当な建築物データセットの要件 |
| 分類 | 要件分類C-1: 妥当な建築物オブジェクト作成 |
| 条文 | LOD1で建築物を記述する場合には、bldg:lod1Solidで示される幾何形状に加え、LOD0の幾何形状（bldg:lod0RoofEdge又はbldg:lod0FootPrint）も、空間属性としてもたなければならない。 |

CityGMLでは、LOD0の建築物の空間属性として、屋根の外形線を表すbldg:lod0RoofEdgeと、建築物の外壁面と地表面との境界線によるbldg:lod0FootPrintが用意されている。両者のいずれを使ってもよい。ただし、この幾何形状を使用してLOD1の立体を作成することから、元となるLOD0の幾何形状を同時に保持しておく。

LOD0の建築物の空間属性には、2次元のGISデータを使用できる。ただし、2次元のGISデータの構造が
妥当な幾何オブジェクトの要件（ 附属書B）に適合しない場合は、GISデータを修正する必要がある。

例えば、図C-3は、内周と外周が一筆書きによりつながっているGISデータをLOD0の建築物の空間属性として使用し、 LOD1に押し出した立体である。 
内周と外周が一筆書きによりつながっている面は、gml:Polygonの要件に適合しないため、このような外形データを押し出したLOD1の立体もCityGMLの要件に適合しない。

![Image](images/tocC_03_01_img002.png)

**表 C-8 — C-6: LOD0幾何形状の妥当性**

| ID | `/req/bldg/6` |
| --- | --- |
| 主題 | 妥当な建築物データセットの要件 |
| 分類 | 要件分類C-1: 妥当な建築物オブジェクト作成 |
| 条文 | LOD1で建築物を記述する場合には、これに使用するLOD0の幾何形状（bldg:lod0RoofEdge又はbldg:lod0FootPrint）が、妥当な幾何オブジェクトでなければならない。 |

LOD1の下面の高さは以下の要件を満たさなければならない。

**表 C-9 — C-7: 建築物の下面高さの基準（LOD1）**

| ID | `/req/bldg/7` |
| --- | --- |
| 主題 | 妥当な建築物データセットの要件 |
| 分類 | 要件分類C-1: 妥当な建築物オブジェクト作成 |
| 条文 | LOD1で作成する建築物の下面の高さは、以下のいずれかとする。 |
| A | 建築物の下面の絶対標高 |
| B | LOD0で作成する水平図形と地形モデルとの交線の最下部点の高さ（最も低い標高） |

LOD1で建築物を記述する場合、下面の高さは、図C-4に示す二つの方法のいずれかにより決定する。建築物に地階が存在し、その最も低い高さが得られる場合にはその高さを使用する。地階の高さについての情報が得られない場合には、地形モデルとLOD0の平面形状との重ね合わせにより、最も低い点の高さを取得し、この値を使用する。

![Image](images/tocC_03_01_img003.png)

地形モデルとLOD0の平面形状との重ね合わせにより最も低い点の高さを取得する方法を選択した場合に、建築物のLOD0の平面形状の範囲で地形モデルが欠落している場合は、以下の手順により建築物の下面の高さを取得する。

　

- 地形モデルの欠落部が水部であり、かつ、LOD0の平面形状の範囲の地形モデルが全て欠落している場合は、地形モデルの欠落部を内挿により補完し、補完後の地形モデルとLOD0の平面形状の重ね合わせにより、最も低い点の高さを取得する。
- 地形モデルの欠落部が水部であり、かつ、LOD0の平面形状の範囲の地形モデルが一部欠落している場合は、一部欠落している地形モデルとLOD0の平面形状の重ね合わせにより、重なる部分の地形モデルの中で最も低い点の高さを取得する。
- 地形モデルの欠落部が水部以外の場合は、航空レーザ点群又は航空写真を用いた三次元図化を行い、ブレークラインを取得する。取得したブレークラインを用いて地形モデルの欠落部分を内挿補完し、補完後の地形モデルとLOD0の平面形状の重ね合わせにより、最も低い点の高さを取得する。

LOD1では建築物の上面及び下面は水平となる。つまり、建築物には一律の高さが付与される。しかしながら、実世界での建築物の多くは複雑な屋根形状を有し、高さは一律ではない。また、使用する資料により、得られる高さは様々である。そこで、LOD1で建築物を作成する場合に、その高さは以下の要件を満たすこととする。

**表 C-10 — C-8: LOD1の上面高さの基準**

| ID | `/req/bldg/8` |
| --- | --- |
| 主題 | 妥当な建築物データセットの要件 |
| 分類 | 要件分類C-1: 妥当な建築物オブジェクト作成 |
| 条文 | LOD1で作成する建築物の上面の高さには、「LOD0の平面の内側に含まれる点群データの中央値」を使用することを原則とする。 |

航空レーザ測量等により取得された点群データを使用する場合、建築物の形状（LOD0による平面）には複数の点が存在することが想定される。このような場合には、統計処理により求めた代表値を建築物の上面の高さとして与える。統計処理により求める代表値として表C-11がある。

**表 C-11 — 統計処理に求める建物高さの代表値**

| 代表値 | 算出方法 |
| --- | --- |
| 最高値 | LOD0の平面に含まれる点群データのうち、最も高さの高い点の値。屋根が傾斜している場合や多層型の屋根形状の場合、その一番高いところの高さを示す。 |
| 中央値 | LOD0の平面に含まれる点群データにおいて、データを小さい順に並べたとき中央に位置する値。 |
| 平均値 | LOD0の平面に含まれる点群データにおいて、データの分布の重心を表す値。 |
| 最頻値 | LOD0の平面に含まれる点群データにおいて、最も頻繁に出現する値。 |
| 最低値 | LOD0の平面に含まれる点群データのうち、最も高さの低い点の高さ。屋根が傾斜している場合や多層型の屋根形状の場合、その一番低いところの高さを示す。 |

このうち、中央値は平均値と異なり、上下に極端にはずれた数値の影響を受けにくいとされる。そのため、標準製品仕様書では、多目的な利用を想定し、中央値の採用を推奨している。なお、国土地理院による「[建物三次元データ作成マニュアル（案）](https://www.gsi.go.jp/kankyochiri/Laser_gijutusiryo.html)」では、航空レーザ測量データ及び建物ポリゴンデータを用いて、建物のポリゴンデータに高さ（中央値）を与える手順が示されている。そのため、LOD1の作成において参考にできる。

計測以外の方法で高さを取得することもできる。具体的には、都市計画基礎調査の建物利用現況に含まれる「高さ」や建築確認申請書類等に記載される「建築物の高さ」を使用してもよい。また、そのほかの高さの取得方法として、都市計画基礎調査等に含まれる建物階数を使用して建築物の高さを推定する方法がある。これは、階高（3mや4m）に建物階数を乗算し、建築物の高さとする方法である。点群データや建築確認申請書類等の既存資料が得られない場合に、便宜的な対応として、このような推定を行うことも考えられる。

建築物に一律の高さを与える場合、いずれの高さを建築物の上面の高さとするかは、ユースケースや使用可能な資料により異なる。そこで、本作業手順では、建築物の上面の高さには原則としてLOD0の平面の内側に含まれる点群データの中央値を採用することとしている。

なお、ユースケースによっては、一律の高さが与えられたLOD1の建築物では要求を満たさない場合がある。その場合には、建築物の幾何形状をより現実に近い形状で記述可能なLOD2を適用する、又は必要な「高さ」を主題属性として建築物に定義する。標準製品仕様書では、建築物の高さ制限の確認を行うことを目的として、主題属性に建築基準法施行令に基づく「建築物の高さ」及び「軒の高さ」を追加している。これら以外の高さが必要な場合には汎用属性を用いて追加することができる。

また、建築物の主題属性である「計測高さ」は、計測により取得した建築物の最も低い位置から最も高い位置までの高さであり、LOD1を中央値や平均値等で作成した場合には、この高さと「計測高さ」とは一致しない場合がある。

ここで、LOD1では、建築物の下面の高さは接地している標高とし、上面の高さは建築物の外形線内に含まれる点群データの標高の中央値とすることが基本となる。このとき、下面の高さと上面の高さを取得する原典資料が異なると、建築物の高さが原典資料の累積誤差により実際と乖離する恐れがある。よって、異なる原典資料を使用する場合には、累積誤差を軽減する策をとる必要がある。

**表 C-12 — C-9: LOD1の高さ取得における誤差対策**

| ID | `/req/bldg/9` |
| --- | --- |
| 主題 | 妥当な建築物データセットの要件 |
| 分類 | 要件分類C-1: 妥当な建築物オブジェクト作成 |
| 条文 | LOD1で作成する建築物の下面の高さを取得する原典資料と上面の高さを取得する原典資料が異なる場合には、必要に応じて累積誤差を軽減する策をとる。 |

例：点群データを用いて建築物の相対的な高さを求め、地形モデルから求めた標高にこの高さを加えて建築物の高さを求める。

![Image](images/tocC_03_01_img004.png)

## C.3.1.3 LOD2

建築物モデル（LOD2）では、建築物の形状を立体として表現する。このとき、建築物オブジェクトは、建築物モデル（LOD2）の定義に従ったものでなければならない。

**表 C-13 — C-10: 建築物のLOD2形状定義**

| ID | `/req/bldg/10` |
| --- | --- |
| 主題 | 妥当な建築物データセットの要件 |
| 分類 | 要件分類C-1: 妥当な建築物オブジェクト作成 |
| 条文 | 建築物のLOD2の形状は、建築物モデル（LOD2）の定義に従う。 |

![Image](images/tocC_03_01_img005.png)

建築物モデル（LOD2）は、含むべき地物によりLOD2.0、LOD2.1及びLOD2.2に細分される。LOD2.0、LOD2.1及びLOD2.2は、航空写真等上空から取得したデータの利用を前提とした区分であり、屋根形状を含む建築物の上面を詳細化する。

標準製品仕様書は、原則としてLOD2.0を採用する。ただし、ユースケースの必要に応じてLOD2.1又はLOD2.2を採用できる。

**表 C-14 — 建築物モデル（LOD2）の取得イメージ**

| LOD | LOD2.0 | LOD2.1 | LOD2.2 |
| --- | --- | --- | --- |
| 取得例 | ![Image](images/tocC_03_01_img006.png) | ![Image](images/tocC_03_01_img007.png) | ![Image](images/tocC_03_01_img008.png) |
| 説明 | 屋根の主要な外形が再現される。LOD2.0では付属物は取得しないため、バルコニーも屋根として取得する。なお、LOD2では屋根面は詳細化されるが外壁面は詳細化されないため、バルコニーの下部も建築物の一部として表現される。 | 小屋根のうち規模が大きいものが再現される。LOD2.0では切妻屋根として表現されたが、LOD2.1の条件を満たしたため、小屋根として表現された。また、LOD2.1の条件を満たすバルコニーが、付属物として区分される。 | 小屋根のうち規模の小さいものが再現される。LOD2.1では無視された屋根窓の屋根がLOD2.2の条件を満たしたため、この屋根形状が表現された。また、LOD2.2の条件を満たす屋根上の煙突が付属物として、さらに区分される。 |

![Image](images/tocC_03_01_img009.png)

**表 C-15 — LOD2.0,LOD2.1及びLOD2.2の区分**

| 建築物モデル（LOD2）に含むべき地物 | 対応するCityGMLの地物型 | LOD2.0 | LOD2.1 | LOD2.2 |
| --- | --- | --- | --- | --- |
| 建築物 | Building | ● | ● | ● |
| 屋根 | RoofSurface | ●射影の短辺の実長3m以上 | ●射影の短辺の実長3m以上又は射影の短辺の実長1m以上かつ正射影の面積3m2以上 | ●射影の短辺の実長1m以上又は正射影の面積1m2以上 |
| 底面 | GroundSurface | ● | ● | ● |
| 外壁面 | WallSurface | ● | ● | ● |
| 建築物部分 | BuildingPart | ■一棟の建築物を主題属性の異なる複数の部分に分ける場合に必須とする。 | ■一棟の建築物を主題属性の異なる複数の部分に分ける場合に必須とする。 | ■一棟の建築物を主題属性の異なる複数の部分に分ける場合に必須とする。 |
| 閉鎖面 | ClosureSurfacce | ■BuildingPartを使用する場合に必須とする | ■BuildingPartを使用する場合に必須とする | ■BuildingPartを使用する場合に必須とする |
| 屋外床面 | OuterFloorSurface |  | 〇 | 〇 |
| 屋外天井面 | OuterCeilingSurface |  |  |  |
| 屋外付属物バルコニー、屋外階段、スロープ、手すり、エレベータ、エスカレータ、庇、アンテナ、煙突、看板等 | BuildingInstallation |  | ●射影の短辺の実長3m以上又は射影の短辺の実長1m以上かつ正射影の面積が3m2以上 | ●射影の短辺の実長1m以上 |
| ●：必須■：条件付必須〇：任意（ユースケースに応じて要否を決定してよい） | ← | ← | ← | ← |

LOD2では、建築物は、屋根、壁等を境界として区切られた空間（立体）となる。そのため、建築物の立体を構成する境界面は、屋根、外壁等の境界面となる地物型の空間属性（面）と一致する。この関係性を図C-8に示す。

![Image](images/tocC_03_01_img010.png)

**表 C-16 — C-11: LOD2立体の境界面参照**

| ID | `/req/bldg/11` |
| --- | --- |
| 主題 | 妥当な建築物データセットの要件 |
| 分類 | 要件分類C-1: 妥当な建築物オブジェクト作成 |
| 条文 | bldg:lod2Solidで示される立体は、その境界面として、建築物の境界となる地物型（bldg:_BoundarySurface）の空間属性を外部参照しなければならない。 |

bldg:Buildingは空間属性bldg:lod2Solidによって立体（gml:Solid）をもつ。立体は、外部境界（gml:exterior）として合成曲面（gml:CompositeSurface）をもつ。この合成曲面は、連続する曲面の集まりである。gml:surfaceMemberにより、合成曲面を構成する個々の曲面（gml:Polygon）をもつ。このとき、gml:surfaceMemberは個々の曲面（gml:Polygon）の識別子を参照するのみで、曲面の実体はもたない。曲面の実体は、別途記述される。この仕組みを外部参照と呼び、XLinkを使って識別子（gml:id）を参照する。曲面の実体は、屋根、外壁等の境界面であるbldg:_BoundarySurfaceの空間属性として記述される。

bldg:_BoundarySurfaceは空間属性bldg:lod2MultiSurfaceによりgml:MultiSurfaceをもつ。これは、1個以上の曲面の集まりであり、個々の曲面はgml:Polygonとして記述される。曲面には、それぞれを区別する識別子が付与される。この識別子は、先に述べたbldg:Buildingの空間属性を構成する要素（gml:surfaceMember）として、参照される。

外部参照の例を図C-9に示す。建築物と、この建築物の外壁の形状を示す面（gml:id=”LOD2_1_S”）があった場合、立体の境界を構成する面として、外壁面（gml:WallSurface）の空間属性を、XLinkを用いて参照している（xlink:href=”#LOD2_1_S”）。

![Image](images/tocC_03_01_img011.png)

## C.3.1.4 LOD3

建築物モデル（LOD3）では、建築物の形状を立体として表現する。このとき、建築物オブジェクトは、建築物モデル（LOD3）の定義に従ったものでなければならない。

**表 C-17 — C-12: 建築物のLOD3形状定義**

| ID | `/req/bldg/12` |
| --- | --- |
| 主題 | 妥当な建築物データセットの要件 |
| 分類 | 要件分類C-1: 妥当な建築物オブジェクト作成 |
| 条文 | 建築物のLOD3の形状は、建築物モデル（LOD3）の定義に従う。 |

![Image](images/tocC_03_01_img012.png)

建築物モデル（LOD3）は、含むべき地物により、LOD3.0、LOD3.1、LOD3.2及びLOD3.3に分かれる。これらは、MMS（Mobile Mapping System）による点群や画像等、側面から取得したデータの利用を前提とした区分であり、外壁面や開口部を含む建築物の側面を詳細化する。標準製品仕様書では原則としてLOD3.0を採用する。ただし、ユースケースの必要に応じてLOD3.1、LOD3.2又はLOD3.3を採用できる。

**表 C-18 — 建築物モデル（LOD3）の取得イメージ**

|  | 取得イメージ | 説明 |
| --- | --- | --- |
| LOD3.0 | ![Image](images/tocC_03_01_img013.png) | 屋根のうち短辺3m以上の屋根面が表現される。付属物のうち、短辺3m以上の規模の大きな付属物が再現される。  LOD3では外壁面が詳細化されるため、LOD2では表現されない付属物の下部の形状も表現される。 また、外壁面に設けられた短辺1m以上の開口部（窓、扉）が再現される。 なお、上図の場合、軒裏は3m以内であったため、表現されなかった。 下図に3m以上の軒を表現した例を示す。LOD3.0において軒を表現する建築物として、寺社や城といった特殊な建築物あるいは倉庫等の規模が大きな建築物が該当する。 |
| LOD3.1 | ![Image](images/tocC_03_01_img014.png) | 短辺の実長1m以上かつ上方からの正射影の面積3m2以上の屋根面が表現される。この結果、左図の例では、LOD3.0では切妻屋根として表現されたが、LOD3.1の条件を満たしたため、入母屋屋根として表現された。 また、この例図では、軒裏の距離が1m以上あったため、表現された。 開口部及び屋外付属物の表現は、LOD3.0と同様の表現となる。 |
| LOD3.2 | ![Image](images/tocC_03_01_img015.png) | LOD3.2ではさらに詳細な表現が可能となり、短辺の実長1m以上又は上方からの正射影の1m2以上屋根が再現される。左図の例では、屋根に設けられた小屋根がこの条件に該当し、再現されている。 また、LOD3.2では、短辺が実長1m以上又は上方又は側方からの正射影の面積1m2以上の屋外付属物が表現される。 左図の例では、屋根上の煙突と外壁面に設けられた庇がこの条件を満たしたため屋外付属物として表現された。  LOD3.2では、面積1m2以上の窓や扉も表現されるため、この条件に該当する窓が追加された。 |
| LOD3.3 | ![Image](images/tocC_03_01_img016.png) | LOD3.3では、短辺の実長が1m未満の細かな屋根の形状が表現される。左図の例では、LOD3.1及びLOD3.2では1枚の屋根面として表現されていたが、LOD3.3では傾斜の異なる2枚の屋根面として区分された。 また、軒裏のうち、屋根の外周との距離が1m未満の狭い軒裏も表現された。 さらに、LOD3.3の条件を満たす1m未満の小さな開口部や付属物が追加された。 |

**表 C-19 — LOD3.0, LOD3.1, LOD3.2及びLOD3.3の区分**

| 建築物モデル（LOD3）に含むべき地物 | 対応するCityGMLの地物型 | LOD3.0 | LOD3.1 | LOD3.2 | LOD3.3 |
| --- | --- | --- | --- | --- | --- |
| 建築物 | Building | ● | ● | ● | ● |
| 屋根面 | RoofSurface | ●短辺の実長3m以上 | ●短辺の実長1m以上かつ上方からの正射影の面積3m2以上 | ●短辺の実長1m以上又は上方からの正射影の1m2以上 | ●全てを対象とする |
| 底面 | GroundSurface | ● | ● | ● | ● |
| 外壁面 | WallSurface | ●短辺の実長3m以上 | ●短辺の実長1m以上かつ側方からの正射影の面積3m2以上 | ●短辺が実長1m以上又は側方からの正射影の面積1m2以上 | ●全てを対象とする |
| 軒裏 | WallSurface | 屋根の外周と外壁面との距離3m以上 | 屋根の外周と外壁面との距離1m以上 | 屋根の外周と外壁面との距離1m以上 | 全てを対象とする |
| 建築物部分 | BuildingPart | ■一棟の建築物を主題属性の異なる複数の部分に分ける場合に必須とする。 | ■一棟の建築物を主題属性の異なる複数の部分に分ける場合に必須とする。 | ■一棟の建築物を主題属性の異なる複数の部分に分ける場合に必須とする。 | ■一棟の建築物を主題属性の異なる複数の部分に分ける場合に必須とする。 |
| 閉鎖面 | ClosureSurface | ■ BuildingPartを使用する場合 | ■ BuildingPartを使用する場合 | ■ BuildingPartを使用する場合 | ■ BuildingPartを使用する場合 |
| 屋外床面 | OuterFloorSurface | 〇 | 〇 | 〇 | 〇 |
| 屋外天井面 | OuterCeilingSurface | 〇 | 〇 | 〇 | 〇 |
| 屋外付属物バルコニー、屋外階段、スロープ、手すり、エレベータ、エスカレータ、庇、アンテナ、煙突、看板等 | BuildingInstallation | ●短辺が実長3m以上又は短辺が実長1m以上かつ上方又は側方からの正射影の面積3m2以上 | ●短辺が実長3m以上又は短辺が実長1m以上かつ上方又は側方からの正射影の面積3m2以上 | ●短辺が実長1m以上又は上方又は側方からの正射影の面積1m2以上 | ●全てを対象とする |
| 扉 | Door | ●短辺が実長1m以上 | ●短辺が実長1m以上 | ●上方又は側方からの正射影の面積1m2以上 | ●全てを対象とする |
| 窓 | Window | ●短辺が実長1m以上 | ●短辺が実長1m以上 | ●上方又は側方からの正射影の面積1m2以上 | ●全てを対象とする |
| ●：必須■：条件付必須〇：任意（ユースケースに応じて要否を決定してよい） | ← | ← | ← | ← | ← |

LOD3の建築物も、LOD2と同様に、建築物は、屋根、外壁等を境界として区切られた空間（立体）となる。そのため、建築物の立体を構成する境界面は、屋根、外壁等の境界面となる地物型の空間属性（面）から構成される。また、LOD3では屋根や外壁等の境界面に開口部（窓、扉）を設けることができる。この開口部を境界面の内空として作成する場合、建築物の立体を構成する境界面には、開口部の空間属性（面）も含まれる（図C-11）。

**表 C-20 — C-13: LOD3立体の境界面参照**

| ID | `/req/bldg/13` |
| --- | --- |
| 主題 | 妥当な建築物データセットの要件 |
| 分類 | 要件分類C-1: 妥当な建築物オブジェクト作成 |
| 条文 | bldg:lod3Solidで示される立体は、その境界面として、建築物の境界となる地物型（bldg:_BoundarySurface）の空間属性を外部参照しなければならない。 |

![Image](images/tocC_03_01_img017.png)

なお、LOD3では、建築物の軒を表現することができる。軒とは、屋根の一部であり、外壁の線から外に突き出した部分である。通常は建物の外周に沿って連続した形となっている。この軒は、開口部の上部など部分的に取り付けられる庇（ひさし）とは区別する。軒を表現した例を図C-12に示す。LOD2では屋根の形状は建築物の立体を構成する面であり、軒の表現は行わない。LOD3において屋根の軒を表現する場合には、屋根は厚みをもった面となり、軒を含む全ての境界面が建築物の立体を構成する面となる。

![Image](images/tocC_03_01_img018.png)

建築物モデル（LOD0）から建築物モデル（LOD3）の作成手法を図C-13に示す。LOD2は、航空写真等上空から取得したデータの利用を前提とした区分であり、屋根形状を含む建築物の上面を詳細化する。LOD3は、MMSによる点群や画像等、側面から取得したデータの利用を前提とした区分であり、外壁面や開口部を含む建築物の側面を詳細化する。なお、最も細かいLOD3.3では地上レーザ点群又はBIMデータの活用も想定される。

![Image](images/tocC_03_01_img019.png)

## C.3.1.5 LOD4

建築物モデル（LOD4）では、建築物の外形を面の集まり又は立体として表現するとともに、建築物の内部の空間を表現する。このとき、bldg:Buildingにより記述される建築物の外形は、LOD3の形状の取得基準と同様である。LOD4は測量によるデータ作成だけではなく、BIMモデルからの変換により作成される場合がある。測量により作成する場合にはbldg:lod4Solid、BIMモデルからの変換により作成する場合には、bldg:lod4MultiSurfaceを使用する。いずれの型を使用する場合でも、建築物オブジェクトは、建築物モデル（LOD4）の定義に従ったものでなければならない。

**表 C-21 — C-14: 建築物のLOD4形状定義**

| ID | `/req/bldg/14` |
| --- | --- |
| 主題 | 妥当な建築物データセットの要件 |
| 分類 | 要件分類C-1: 妥当な建築物オブジェクト作成 |
| 条文 | 建築物のLOD4の形状は、建築物モデル（LOD4）の定義に従う。 |

建築物モデル（LOD4）は、含むべき地物により、LOD4.0、LOD4.1及びLOD4.2に区分される。標準製品仕様書では原則としてLOD4.0を採用する。ただし、ユースケースの必要に応じてLOD4.1又はLOD4.2を採用できる。

**表 C-22 — 建築物モデル（LOD4）の取得イメージ**

| LOD | 取得イメージと説明 |
| --- | --- |
| LOD4.0 | ![Image](images/tocC_03_01_img020.png)LOD4.0は建築物の外形（上図1）に加え、建築物の内部を表現する。このとき、建築物の内部を部屋（bldg:Room）に区切り、各部屋の形状を立体として表現する（上図2）。また、部屋の立体の境界面を、天井面（bldg:CeilingSurface）、内壁面（bldg:InteriorWallSurface）、床面（bldg:FloorSurface）又は閉鎖面（bldg:ClosureSurface）のいずれかに区分する（上図3）。さらに、各部屋の天井面、内壁面又は床面に存在する扉（bldg:Door）及び窓（bldg:Window）を区分する（上図4）。閉鎖面は、内壁面や天井面、床面はないが、建築確認申請では部屋となっている空間を区切る場合に仮想的な境界面として使用する。 建築物の階を表現する場合は、CityObjectGroupを使用する。上図1のように、建築物が複数の階から構成される場合、上図4に示す同じ階の部屋を、CityObjectGroupを使用してグループ化する。このとき、CityObjectGroupの名称（gml:name）は階を識別する名称となる。 なお、CityGMLでは、壁面や天井面などは全て面として表現する。一方、現実世界の壁には厚みがある。1つの壁が建築物の外形を示す外壁と部屋の外形を示す内壁との機能を備えていた場合（上図5）、建築物の外形となる面（bldg:WallSurface）と部屋の外形となる面（bldg:InteriorWallSurface）の2枚の面として表現され、それらの面の間には隙間（壁の厚み）ができる（何もない）。 また、LOD4.0では建築物の内部に存在する付属物や家具を表現しない。 |
| LOD4.1 | ![Image](images/tocC_03_01_img021.png)LOD4.1ではLOD4.0に、屋内付属物（bldg:IntBuildingInstallation）として、階段、スロープ、輸送設備（エスカレータ、エレベータ及び動く歩道）、柱及びデッキ・ステージが追加される。上図の例では、LOD4.0に加えて、階段、踊り場、エレベータ、柱が付属物として追加された。 |
| LOD4.2 | ![Image](images/tocC_03_01_img022.png)LOD4.2ではLOD4.1に屋内の付属物（bldg:IntBuildingInstallation）として、手すり、パネル及び梁が付属物として追加される。また、机やいすなどの移動可能な家具（bldg:BuildingFurniture）が追加される。 上図の例では、LOD4.2に加えて屋内付属物として階段の手すりとパネル（間仕切り）、また、家具として机及び椅子が追加された。 |

**表 C-23 — LOD4.0, LOD4.1及びLOD4.2の区分**

| 建築物モデル（LOD4）に含むべき地物 | ← | 対応するCityGMLの地物型 | LOD4.0 | LOD4.1 | LOD4.2 |
| --- | --- | --- | --- | --- | --- |
| 建築物 | ← | bldg:Building | ● | ● | ● |
| 建築物部分 | ← | bldg:BuildingPart | ■一棟の建築物を、属性の異なる複数の部分に分ける場合に必須とする。 | ■一棟の建築物を、属性の異なる複数の部分に分ける場合に必須とする。 | ■一棟の建築物を、属性の異なる複数の部分に分ける場合に必須とする。 |
| 屋根面 | ← | bldg:RoofSurface | ● | ● | ● |
| 壁面 | ← | bldg:WallSurface | ● | ● | ● |
| 底面 | ← | bldg:GroundSurface | ● | ● | ● |
| 屋外天井面 | ← | bldg:OuterGroundSurface | 〇 | 〇 | 〇 |
| 屋外床面 | ← | bldg:OuterFloorSurface | 〇 | 〇 | 〇 |
| 屋外付属物 | ← | bldg:BuildingInstallation | ● | ● | ● |
| 部屋 | ← | bldg:Room | ● | ● | ● |
| 天井面 | ← | bldg:CeilingSurface | ● | ● | ● |
| 内壁面 | ← | bldg:InteriorWallSurface | ● | ● | ● |
| 床面 | ← | bldg:FloorSurface | ● | ● | ● |
| 閉鎖面 | ← | bldg:ClosureSurface | ■ BuildingPartを使用する場合、及び、内壁面、天井面、床面が無いが建築確認申請上部屋として区分されている空間を区切る場合に必須とする。 | ■ BuildingPartを使用する場合、及び、内壁面、天井面、床面が無いが建築確認申請上部屋として区分されている空間を区切る場合に必須とする。 | ■ BuildingPartを使用する場合、及び、内壁面、天井面、床面が無いが建築確認申請上部屋として区分されている空間を区切る場合に必須とする。 |
| 窓 | ← | bldg:Window | ● | ● | ● |
| 扉 | ← | bldg:Door | ● | ● | ● |
| 屋内付属物 | 階段 | bldg:IntBuildingInstallation |  | ● | ● |
| ↑ | スロープ | bldg:IntBuildingInstallation |  | ● | ● |
| ↑ | 輸送設備 | bldg:IntBuildingInstallation |  | ● | ● |
| ↑ | 柱 | bldg:IntBuildingInstallation |  | ● | ● |
| ↑ | デッキ・ステージ | bldg:IntBuildingInstallation |  | ● | ● |
| ↑ | 梁 | bldg:IntBuildingInstallation |  |  | 〇 |
| ↑ | パネル | bldg:IntBuildingInstallation |  |  | 〇 |
| ↑ | 手すり | bldg:IntBuildingInstallation |  |  | 〇 |
| 家具 | ← | bldg:BuildingFurniture |  |  | 〇 |
| 階 | ← | grp:CityObjectGroup | ● | ● | ● |
| 任意設定空間（例：防火区画） | ← | grp:CityObjectGroup |  |  | 〇 |
| ●：必須■：条件付必須〇：任意（ユースケースに応じて要否を決定してよい） | ← | ← | ← | ← | ← |

建築物モデル（LOD4）による建築物の外形は、建築物モデル（LOD3）と同様である。よって、建築物の立体を構成する境界面は、屋根面、外壁面等の境界面となる地物型の空間属性（面）から構成され、屋根面や外壁面等の境界面に開口部を境界面の内空として作成する場合には、建築物の立体を構成する境界面には、開口部の空間属性（面）も含まれる（図C-14）。

![Image](images/tocC_03_01_img023.png)

建築物モデル（LOD4）による建築物の形状を、面の集まりとして表現する場合も同様である。建築物を構成する面は、屋根面、外壁面等の境界面となる地物型の空間属性（面）や開口部の空間属性（面）となる（図C-15）。

![Image](images/tocC_03_01_img024.png)

