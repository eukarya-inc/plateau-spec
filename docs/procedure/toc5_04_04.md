# 6.4.4 ファイル名称

## 6.4.4 ファイル名称

成果品に含むべき各ファイルの名称に適用する命名規則を示す。
なお、オープンデータ用のファイルのファイル名称は、原則として、地方公共団体用3D都市モデル 成果品のファイル名称の末尾に_opを付与する。詳細を各項に示す。

## 6.4.4.1 3D都市モデルのファイル名称

指定されたファイル単位に分割された3D都市モデルのファイル名称は`[メッシュコード]_[地物型]_[CRS]_[オプション]`とする。拡張子を含めたファイル名称は、`[メッシュコード]_[地物型]_[CRS]_[オプション].gml`となる。
各記号の意味を表6-22に示す。

**表 6-22 — ファイル名の構成要素**

| ファイル名称の構成要素 | 説明 | 使用可能な文字 |
| --- | --- | --- |
| `[メッシュコード]` | ファイル単位となる地域メッシュのメッシュコード又は国土基本図郭の図郭番号 | 半角英数字 |
| `[地物型]` | 格納された地物の種類を示す接頭辞 | 半角英数字 |
| `[CRS]` | 格納された地物に適用される空間参照系 | 半角数字 |
| `[オプション]` | 必要に応じてファイルを細分したい場合の識別子（オプション） | 半角英数字。区切り文字を使用したい場合は半角のハイフンのみ。 |
| _ | ファイル名称の構成要素同士の区切り文字 | ファイル名称の構成要素同士を区切る場合には、アンダースコア（_）のみを用いる。ファイル名称の構成要素の中を区切る場合は、ハイフン（-）を用いる。いずれも半角とする。 |

`[地物型]`にはファイルに含まれる応用スキーマを識別する接頭辞を付与する。標準製品仕様書に定義する接頭辞を表6-23に示す。

**表 6-23 — 接頭辞**

| 応用スキーマ | ← | 接頭辞 |
| --- | --- | --- |
| 建築物モデル | ← | bldg |
| 交通（道路）モデル | ← | tran |
| 交通（鉄道）モデル | ← | rwy |
| 交通（徒歩道）モデル | ← | trk |
| 交通（広場）モデル | ← | squr |
| 交通（航路）モデル | ← | wwy |
| 土地利用モデル | ← | luse |
| 災害リスク（浸水）モデル | 洪水浸水想定区域 | fld |
| ↑ | 津波浸水想定 | tnm |
| ↑ | 高潮浸水想定区域 | htd |
| ↑ | 内水浸水想定区域 | ifld |
| ↑ | ため池ハザードマップ | rfld |
| 災害リスク（土砂災害）モデル | 土砂災害警戒区域 | lsld |
| 都市計画決定情報モデル | ← | urf |
| 橋梁モデル | ← | brid |
| トンネルモデル | ← | tun |
| その他の構造物モデル | ← | cons |
| 都市設備モデル | ← | frn |
| 地下埋設物モデル | ← | unf |
| 地下街モデル | ← | ubld |
| 植生モデル | ← | veg |
| 地形モデル | ← | dem |
| 水部モデル | ← | wtr |
| 区域モデル | ← | area |
| 汎用都市オブジェクト | ← | gen |
| アピアランスモデル | ← | app |
| 拡張製品仕様書で追加した地物（ただし、urf:Zoneを継承する地物を除く） | ← | ext |

`[CRS]` には、オブジェクトに適用される空間参照系の略称を使用する。略称を表6-24に示す。ただし、「日本測地系2011における平面直角座標系と東京湾平均海面を基準とする標高の複合座標参照系」は地下埋設物モデルのみに適用する。

**表 6-24 — 空間参照系の略称**

| オブジェクトに適用される空間参照系 | 略称 |
| --- | --- |
| 日本測地系2011における経緯度座標系と東京湾平均海面を基準とする標高の複合座標参照系 | 6697 |
| 日本測地系2011における平面直角座標系と東京湾平均海面を基準とする標高の複合座標参照系 | 下記のいずれかのコードを使用する。 10162  10163  10164  10165  10170  10166  10167  10168  10169  10171  10172  10173  10174 |

　

注記6.4.4.1の注記表6-24に示す空間参照系の略称は、EPSGコードと呼ばれる、空間参照系を識別するコードである。

「日本測地系2011における平面直角座標系と東京湾平均海面を基本とする標高の複合座標参照系」の略称は、適用される平面直角座標系の系により、区分されている。

例 — `[メッシュコード]`、`[地物型]`及び`[CRS]`により構成されるファイル名称の例`53394610_bldg_6697` （拡張子を含めると、53394610_bldg_6697.gml）

例示した名称のファイルには、基準地域メッシュコード53394610に区分される範囲に含まれる、建築物、建築物部分、建築物付属物及びこれらの境界面が含まれる、「日本測地系2011における経緯度座標系と東京湾平均海面を基準とする標高」の複合座標参照系により記述されたデータ集合が格納される。

`[オプション]`は、メッシュ単位及び地物型単位となるファイルをさらに分割したい場合に使用する。使用しない場合は区切り文字と共に省略する（`[オプション]`を省略する場合は、`[メッシュコード]_[地物型]_[CRS].gml`となる）。

標準製品仕様書で定義する`[オプション]`の文字列を表6-25に示す。

`[オプション]`として、表6-25に示す文字列を複数使用したい場合は、区切り文字を用いて文字列をつなげ、`[オプション]`に使用する文字列とする。

`[オプション]`に使用する文字列として、`[識別子]`を使用する場合は、拡張製品仕様書においてオプションの文字列、適用するフォルダの名称、オプションの意味の一覧を作成する。

**表 6-25 — オプションに使用する文字列**

| オプション | 適用するフォルダ名 | オプションの意味 |
| --- | --- | --- |
| l1 | fld | ファイルに含まれる洪水浸水想定区域が対象とする降雨規模が計画規模である。 |
| l2 | fld | ファイルに含まれる洪水浸水想定区域が対象とする降雨規模が想定最大規模である。 |
| 05 | urf | 都市計画区域及び準都市計画区域 |
| 07 | urf | 区域区分 |
| 08 | urf | 地域地区 |
| 10-2 | urf | 促進区域 |
| 10-3 | urf | 遊休土地転換利用促進地区 |
| 10-4 | urf | 被災市街地復興推進地域 |
| 11 | urf | 都市施設 |
| 12 | urf | 市街地開発事業 |
| 12-2 | urf | 市街地開発事業等の予定区域 |
| 12-4 | urf | 地区計画等 |
| lnp | urf | 都市機能誘導区域及び居住誘導区域 |
| lod3 | dem | 地形モデル（LOD3）を分けて格納したデータを意味する。 |
| f`[識別子]` | gen | 汎用都市オブジェクトのファイルを、地物の種類ごとに分けたい場合に使用する。`[識別子]`は、コードリスト（GenericCityObject_name.xml）のコードと一致させる。このオプションを使用する場合は、拡張製品仕様書において使用するオプションの一覧を示さなければならない。 |
| f`[識別子]` | ext | 拡張製品仕様書で追加した地物のファイルを、地物ごとに分けたい場合に使用する。`[識別子]`は、任意の半角英数字の組み合わせとする。このオプションを使用する場合は、拡張製品仕様書において使用するオプションの一覧を示さなければならない。 |
| `[識別子]` | udx以下の全てのサブフォルダ | その他の事由によりファイルを分割する場合に使用する。`[識別子]`は、任意の半角英数字の組み合わせとする。ただし、他のオプションの文字列と重複してはならない。このオプションを使用する場合は、拡張製品仕様書において使用するオプションの一覧を示さなければならない。 |

それぞれの文字列は、以下の場合に使用する。

## 6.4.4.1.1 洪水浸水想定区域のファイル名称

洪水浸水想定区域のファイル名称は、`[メッシュコード]_[地物型]_[CRS]_[オプション]`を適用し、`[オプション]`が取りうる値は、l1又はl2とする（「l1」は、小文字のエルと数字のイチの組み合わせ、「l2」は小文字のエルと数字の二の組み合わせ）。ファイルに含まれる洪水浸水想定区域が対象とする降雨規模が計画規模の場合には、l1を使用し、想定最大規模の場合はl2を使用する。

例 — 洪水浸水想定区域のファイル名称の例`533946_fld_6697_l1` （拡張子を含めると、 `533946_fld_6697_l1.gml`）

## 6.4.4.1.2 都市計画決定情報のファイル名称

都市計画決定には様々な種類があるため、これらが全て同じフォルダに混在すると、データの利便性が損なわれる恐れがある。そこで、標準製品仕様書ではあらかじめ都市計画の種類ごとにオプションとして使用する文字を定め、都市計画の種類ごとにファイルを分けて作成するように定義している。

## 6.4.4.1.3 高精度な地形モデルのファイル名称

3D都市モデルでは、同一の都市オブジェクトの幾何を、異なるLODを用いて一つの地物インスタンスとして記述することが基本となる。ただし、地形モデルの場合は地物の単位が基準地域メッシュとなり、同一の地物インスタンスに複数のLODを格納することでデータ量が膨大となり、操作性が低下する懸念がある。

そこで、地形モデル（LOD3）は、ファイル名のオプション（lod3）を用いてファイルを分けてもよい。このとき、gml:nameには対象となる基準地域メッシュのメッシュ番号が記載されるため、これを用いて同一の都市オブジェクトとして扱うことができる。

## 6.4.4.1.4 拡張製品仕様書で追加した地物のファイル名称

拡張製品仕様書において汎用都市オブジェクトを追加した場合及び標準製品仕様書には含まれていない地物をi-URから追加した場合は、それぞれのモデルを格納するフォルダ（gen及びext）において、オプションの文字列を用いて追加した地物の種類ごとにファイルを分けることができる。このとき、オプションの文字列は、f`[識別子]`を使用する。このとき`[識別子]`は半角数字の組み合わせとする。

例 — 追加した汎用都市オブジェクトのファイル名称の例`533946_gen_6697_f20` （拡張子を含めると、 `533946_gen_6697_f20.gml`）

## 6.4.4.1.5 拡張製品仕様書での任意のオプション文字列の追加

その他の事由により、ファイルを分割したい場合は、`[オプション]`に使用する文字列として`[識別子]`を指定し、これを用いることでファイルを分割できる。このとき、拡張製品仕様書に示す「表7-8　本製品仕様書で追加するオプションに使用する文字列」に`[識別子]`として指定する文字列とその説明を記載しなければならない。

ファイルを分割する例を示す。

- **基本となるメッシュからファイルを分割した場合**：ファイルサイズにより基本となるメッシュからファイルを分割した場合（6.4.2参照）は、`[オプション]`を使用する。`[オプション]`には、分割後の位置を示す数字を使用する。 第2次地域区画を4分割したファイルの名称に使用する`[オプション]`の数字及びその位置を図6-2に示す。このとき、`[メッシュ]`には、第2次地域区画のメッシュコードを使用する。 なお、第2次地域区画を第3次地域区画に分割した場合は、`[オプション]`は使用せず、`[メッシュ]`に第3次地域区画のメッシュコードを使用する。 第3次地域区画を2分の1メッシュに分割したファイルの名称に使用する`[オプション]`の数字及びその位置を図6-3に示す。このとき、`[メッシュ]`には、第3次地域区画のメッシュコードを使用する。 同様にして、4分の1メッシュに分割したファイルの名称に使用する`[オプション]`の数字及びその位置を図6-4に示す。このとき、`[メッシュ]`には、第3次地域区画のメッシュコードを使用する。
  
  
  
  
  
  
- **同一の地物型のデータを複数のモデル整備事業者が整備する場合**：`[識別子]`を用いて区分する。事業者を識別する識別子を決め、拡張製品仕様書に示す「表 7-8　本製品仕様書で追加するオプションに使用する文字列」に事業者ごとの識別子を記載する。
  
- **成果品が複数種類ある場合**：特段の事情により成果品を複数種類作成する場合は、`[識別子]`を使用していずれの成果品のデータであるかを識別できるようにする。このとき、`[識別子]`に使用する文字列は成果品を格納するルートフォルダに使用する`[オプション]`と一致させること。 なお、成果品が複数種類ある場合でも、内容が変わらない地物型のファイル名称は、`[識別子]`を省略してよい。例えば、建築物（bldg）、道路（tran）、土地利用（luse）から構成される3D都市モデルから、建築物の属性のみが異なる複数の成果品を作成する場合、同一の内容となる道路と土地利用の3D都市モデルファイルには`[オプション]`は不要となる。

## 6.4.4.1.6 複数のオプション文字列を組み合わせる場合

複数のオプションの文字列を、区切り文字（-）でつなぐ。標準製品仕様書に定義済みのオプション値と、拡張製品仕様書において追加したオプション値を同時に使用する場合は、最初に標準製品仕様書に定義したオプション値を記載し、次に拡張製品仕様書で追加したオプション値を記載する。

例 — ファイル名の例：ファイルを地形モデル（LOD3）で分け、さらに事業者で分けた場合`56384642_dem_6697_lod3-aac` （拡張子を含めると、 `56384642_dem_6697_lod3-aac.gml`）

## 6.4.4.1.7 オープンデータのファイル名称

オープンデータとなる3D都市モデルのファイル名称は、元となる3D都市モデルのファイル名称に「 `_op` 」を付与し、 `[メッシュコード]_[地物型]_[CRS]_[オプション]_op`とする。

例 — ファイル名称の例`53394610_bldg_6697_op` （拡張子を含めると、 `53394610_bldg_6697_op.gml`）

例示したファイルには、基準地域メッシュコード53394610に区分される範囲に含まれる、建築物、建築物部分、建築物付属物及びこれらの境界面が含まれる、日本測地系2011における経緯度座標系と東京湾平均海面を基準とする標高の複合座標参照系により記述されたデータ集合からオープンデータ化が可能なデータが抽出されたデータ集合が格納される。

## 6.4.4.2 コードリストのファイル名称

作成したコードリストのファイル名称は、「2.4標準製品仕様書の拡張」においてコード型の属性を追加した手順に示すとおりとする。オープンデータ用のコードリストには、_opは付与しない。

## 6.4.4.3 メタデータのファイル名称

3D都市モデルのメタデータファイルの名称は、`udx_[都市コード]_[整備年度]_[地物型]_[オプション]`とする。
 `[都市コード]`及び`[整備年度]`の命名規則は、ルートフォルダの命名規則（6.4.5.2）に従う。
 `[地物型]`は地物型を識別する接頭辞（表6-23）とする。
 `[オプション]`は、メタデータを分けたい場合（6.3.1）に、それぞれのメタデータを識別するために使用する任意の半角英数字とする。


例1 — 地物型ごとにメタデータを作成する場合のファイル名称の例`udx_23100_2020_fld` （拡張子を含めると、 `udx_23100_2020_fld.xml`）

例2 — 地物型をまとめてメタデータを作成する場合のファイル名称の例`udx_23100_2020` （拡張子を含めると、 `udx_23100_2020.xml`）

なお、オープンデータのメタデータには、末尾に_opが付く。

例3 — 地物型ごとにオープンデータのメタデータを作成する場合のファイル名称の例`udx_23100_2020_fld_op` （拡張子を含めると、 `udx_23100_2020_fld_op.xml`）

例4 — 地物型をまとめてオープンデータのメタデータを作成する場合のファイル名称の例`udx_23100_2020_op` （拡張子を含めると、 `udx_23100_2020_op.xml`）

## 6.4.4.4 製品仕様のファイル名称

3D都市モデルの製品仕様のファイル名称は、`[都市コード]_[提供者区分]_[整備年度]_specification`とする。また、附属書Aに示す様式に従い作成した応用スキーマ文書やコードリスト等の表のファイル名称は、`[都市コード]_[提供者区分]_[整備年度]_objectlist`とする。

`[都市コード]`、`[提供者区分]`及び`[整備年度]`の命名規則は、ルートフォルダの命名規則（6.4.5.2）に従う。

例1 — 製品仕様のファイル名称の例`27100_city_2020_specification` （拡張子を含めると、 `27100_city_2020_specification.pdf`）

例2 — 様式Ａのファイル名称の例`27100_city_2020_objectlist` （拡張子を含めると、 `27100_2020_objectlist.xlsx`）

オープンデータの製品仕様のファイル名称には、末尾に_opを付ける。

例3 — オープンデータ用製品仕様のファイル名称の例`27100_city_2020_specification_op` （拡張子を含めると、 `27100_city_2020_specification_op.pdf`）

例4 — オープンデータ用様式Ａのファイル名称の例：`27100_city_2020_objectlist_op` （拡張子を含めると、 `27100_city_2020_objectlist_op.xlsx`）

## 6.4.4.5 索引図のファイル名称

索引図のファイル名称は、`[都市コード]_indexmap`とする。

`[都市コード]`の命名規則は、ルートフォルダの命名規則（6.4.5.2）に従う。

例1 — 索引図のファイル名称の例`27100_indexmap` （拡張子を含めると、`27100_indexmap.pdf`）

オープンデータの索引図のファイル名称には、末尾にopを付ける。

例2 — オープンデータ用索引図のファイル名称の例`27100_indexmap_op` （拡張子を含めると、 `27100_indexmap_op.pdf`）

## 6.4.4.6 画像のファイル名称

地物型に使用するテクスチャ用の画像ファイルのファイル名称（拡張子を除いた部分）には、任意の半角英数字及び半角記号（ハイフン又はアンダースコアのみ）を使用する。

## 6.4.4.7 三次元点群データのファイル名称

都市オブジェクトに対応する三次元点群データのファイル名称（拡張子を除いた部分）には、任意の半角英数字及び半角記号（ハイフン又はアンダースコアのみ）を使用する。

