# 4.23 ポイントクラウドモデルの応用スキーマ

## 4.23 ポイントクラウドモデルの応用スキーマ

PointCloudモジュールは、地物と三次元点群データを対応させる方法を規定している。この方法により、建築物の外郭、建築物内の部屋、または単一の壁面と組み合わせることで三次元点群データでより精緻に表現することができる。同じことは、交通モデル、植生モデル、都市設備モデルなどを含む他のすべての地物にも適用される。ポイントクラウドは、CityGMLファイル内にインラインで提供すること、LASやLAZといった一般的なファイルタイプの外部三次元点群データファイルへの参照として提供することもできる。

標準製品仕様書で定義するポイントクラウドの応用スキーマは、CityGML3.0のPointCloudモジュールを、CityGML2.0で使用できるようにするために必要となる型のみを抽出し、独自の主題属性を追加定義したi-URで拡張したプロファイルである。

## 4.23.1 ポイントクラウドモデルのLOD

標準製品仕様書第5.0版では、ポイントクラウドモデルのLODは設定していない。

## 4.23.2 ポイントクラウドモデルの応用スキーマクラス図

## 4.23.2.1 PointCloud（i-UR）

PointCloudパッケージは、都市オブジェクトと対応する三次元点群データの情報を地物型として定義する。uro:PointCloudは都市オブジェクトと対応する三次元点群データを指定する地物型であり、uro:PointCloudSpecAttributeは、対応付ける三次元点群データの詳細を記述するデータ型である。

![Image](images/toc4_23_img001.png)

## 4.23.3 ポイントクラウドモデルの応用スキーマ文書

## 4.23.3.1 UrbanObject（i-UR）

## 4.23.3.1.1 uro:AbstractPointCloud

**表 4-840**

| 型の定義 | 地物の三次元点群データを表す抽象型。 | ← |
| --- | --- | --- |
| 上位の型 | gml:_Feature | ← |
| ステレオタイプ | << FeatureType >> | ← |
| 継承する属性 | ← | ← |
| 属性名 | 属性の型及び多重度 | 定義 |
| gml:description     [ _Feature ] | gml:StringOrRefType [0..1] | 都市オブジェクトの概要。 |
| gml:name     [ _Feature ] | gml::CodeType [0..1] | 都市オブジェクトを識別する名称。文字列とする。 |
| gml:boundedBy     [ _Feature ] | gml::Envelope [0..1] | 都市オブジェクトの範囲及び適用される空間参照系。 CityModelの場合のみ必須とする。 |

## 4.23.3.1.2 uro:PointCloud

**表 4-841**

| 型の定義 | 地物の三次元点群データ。三次元点群データとは、地形、地物等を表す三次元座標を持つ多数の点データ及びその内容を表す属性データを、計算処理が可能な形態で表現したものをいう。 ［出典：[作業規定の準則](https://www.gsi.go.jp/gijyutukanri/gijyutukanri41018.html)］ | ← |
| --- | --- | --- |
| 上位の型 | uro:AbstractPointCloud | ← |
| ステレオタイプ | << FeatureType >> | ← |
| 継承する属性 | ← | ← |
| 属性名 | 属性の型及び多重度 | 定義 |
| gml:description     [ _Feature ] | gml:StringOrRefType [0..1] | 都市オブジェクトの概要。 |
| gml:name     [ _Feature ] | gml::CodeType [0..1] | 都市オブジェクトを識別する名称。文字列とする。 |
| gml:boundedBy     [ _Feature ] | gml::Envelope [0..1] | 都市オブジェクトの範囲及び適用される空間参照系。 CityModelの場合のみ必須とする。 |
| 自身に定義された属性 | ← | ← |
| 属性名 | 属性の型及び多重度 | 定義 |
| uro:mimeType     [ PointCloud ] | gml::CodeType [0..1] | 三次元点群データの外部ファイルフォーマット。コードリスト（ PointCloud_mimeType.xml）より選択する。三次元点群データの外部ファイルフォーマットは、LAS又はLAZとする。 |
| uro:pointFile     [ PointCloud ] | xs::anyURI [0..1] | 三次元点群データの外部ファイルへの参照。相対パスにより記述する。 |
| uro:pointFileSrsName     [ PointCloud ] | xs::string [0..1] | 三次元点群データの外部ファイルの座標参照系。 EPSG:[EPSGコード]  [EPSGコード]は、EPSGにより指定された半角数字の組合せによる識別子とする。 |
| 自身に定義された関連役割 | ← | ← |
| 関連役割名 | 関連役割の型及び多重度 | 定義 |
| uro:pointCloudSpecAttribute             [ PointCloud ] | uro:PointCloudSpecAttribute [0..1] | 三次元点群データの仕様。 |
| uro:points             [ PointCloud ] | gml:MultiPoint [0..1] | 三次元点群データの幾何形状。 インラインにより三次元点群データの幾何形状を記述する場合に使用する。 |

## 4.23.3.1.3 uro:PointCloudSpecAttribute

**表 4-842**

| 型の定義 | 三次元点群データの仕様に関する詳細情報。 | ← |
| --- | --- | --- |
| 上位の型 | — | ← |
| ステレオタイプ | << DataType >> | ← |
| 自身に定義された属性 | ← | ← |
| 属性名 | 属性の型及び多重度 | 定義 |
| uro:class     [ PointCloudSpecAttribute ] | gml::CodeType [1..1] | 三次元点群データの種類。コードリスト（PointCloudSpecAttribute_class.xml）より選択する。 |
| uro:function     [ PointCloudSpecAttribute ] | gml::CodeType [0..*] | 三次元点群データの計測方法。コードリスト（PointCloudSpecAttribute_function.xml）より選択する。 |
| uro:srcScale     [ PointCloudSpecAttribute ] | gml::CodeType [0..1] | 原典の三次元点群データの地図情報レベル。コードリスト（PointCloudSpecAttribute_srcScale.xml）より選択する。 |
| uro:srcRequiredHorizontalAccuracy     [ PointCloudSpecAttribute ] | gml::LengthType [0..1] | 原典の三次元点群データの水平要求精度。単位はｍとする。 |
| uro:srcRequiredVerticalAccuracy     [ PointCloudSpecAttribute ] | gml::LengthType [0..1] | 原典の三次元点群データの垂直要求精度。単位はｍとする。 |
| uro:srcRequiredPointDensity     [ PointCloudSpecAttribute ] | gml::MeasureType [0..1] | 原典の三次元点群データの要求点密度。単位は点/m2とする。 |
| uro:srcFilteringCriteria     [ PointCloudSpecAttribute ] | gml::CodeType [0..*] | 原典の三次元点群データのフィルタリングの状況。コードリスト（PointCloudSpecAttribute_srcFilteringCriteria.xml）より選択する。 |
| uro:srcGridInterval     [ PointCloudSpecAttribute ] | gml::MeasureType [0..1] | 原典の三次元点群データの格子間隔。単位はm又はdegとする。 三次元点群データがグリッドデータの場合に記述する。 |
| uro:isIntensity     [ PointCloudSpecAttribute ] | xs::boolean [0..1] | 三次元点群データにIntensity（反射強度）の情報が含まれているかを示す。 1：含まれている 0：含まれていない |
| uro:spectralBandSet     [ PointCloudSpecAttribute ] | gml::CodeType [0..*] | 三次元点群データに含まれる波長スペクトル情報を示すコード。コードリスト（PointCloudSpecAttribute_spectralBandSet.xml）から選択する。 |
| uro:isReturnInfo     [ PointCloudSpecAttribute ] | xs::boolean [0..1] | 三次元点群データにReturnNumber及びNumber of Returns（反射番号、総反射回数）の情報が含まれているかを示す。 1：含まれている 0：含まれていない |
| uro:isStandardClassification     [ PointCloudSpecAttribute ] | xs::boolean [0..1] | 三次元点群データがASPRS（American Society for Photogrammetry and Remote Sensing）の定義したクラス分類に適合しているかを示す。 1：適合している 0：適合していないなお、具体的なクラス分類は「別表 ASPRSが定義したクラス分類」に示す。 |
| uro:customClassificationType     [ PointCloudSpecAttribute ] | gml::CodeType [0..*] | 独自のクラス分類コード。三次元点群データを独自にクラス分類している場合に使用しているクラス分類コードを入力する。コードリスト（PointCloudSpecAttribute_customClassificationType.xml）を作成し、選択する。 |
| uro:pointCloudAssociationMethod     [ PointCloudSpecAttribute ] | gml::CodeType [1..1] | 三次元点群データと地物の対応づけの方法。コードリスト（PointCloudSpecAttribute_pointCloudAssociationMethod.xml）より選択する。 |
| uro:pointSubsamplingInfo     [ PointCloudSpecAttribute ] | gml::CodeType [0..1] | 三次元点群データの間引きの情報。コードリスト（PointCloudSpecAttribute_pointSubsamplingInfo.xml）より選択する。 |

別表：ASPRSが定義したクラス分類

**表 4-843**

| クラス値 | 定義 |
| --- | --- |
| 0 | Created, Never Classified (未分類、作成時のまま) |
| 1 | Unclassified (未分類) |
| 2 | Ground (地面) |
| 3 | Low Vegetation (低植生) |
| 4 | Medium Vegetation (中植生) |
| 5 | High Vegetation (高植生) |
| 6 | Building (建物) |
| 7 | Low Point (Noise) (ノイズ) |
| 8 | Model Key-Point (Mass Point) [Format 0-5採用] |
| 9 | Water (水域) |
| 10 | Rail (レール) |
| 11 | Road Surface (道路表面) |
| 12 | Overlap Points (オーバーラップ点) [Format 0-5採用] |
| 13 | Wire – Guard (Shield) (ガード線) |
| 14 | Wire – Conductor (Phase) (送電線) |
| 15 | Transmission Tower (送電塔) |
| 16 | Wire-Structure Connector (電線-構造物接続部) |
| 17 | Bridge Deck (橋梁デッキ) |
| 18 | High Noise (高ノイズ) |
| 19 | Overhead Structure (頭上構造物) |
| 20 | Ignored Ground (無視された地面) |
| 21 | Snow (雪) |
| 22 | Temporal Exclusion (時間的除外) |
| 23-63 | Reserved for ASPRS Definition |
| 64-255 | User Definable (ユーザー定義可能) |

## 4.23.4 ポイントクラウドモデルで使用するコードリストと列挙型

## 4.23.4.1 UrbanObject（i-UR）

## 4.23.4.1.1 PointCloud_mimeType.xml

**表 4-844**

| ファイル名 | PointCloud_mimeType.xml |
| --- | --- |
| ファイルURL | [https://www.geospatial.jp/iur/codelists/3.2/PointCloud_mimeType.xml](https://www.geospatial.jp/iur/codelists/3.2/PointCloud_mimeType.xml) |
| コード | 説明 |
| application/vnd.las | *.las PointCloudData |
| application/vnd.laszip | *.laz PointCloudData |

## 4.23.4.1.2 PointCloudSpecAttribute_class.xml

**表 4-845**

| ファイル名 | PointCloudSpecAttribute_class.xml |
| --- | --- |
| ファイルURL | [https://www.geospatial.jp/iur/codelists/3.2/PointCloudSpecAttribute_class.xml](https://www.geospatial.jp/iur/codelists/3.2/PointCloudSpecAttribute_class.xml) |
| コード | 説明 |
| 1 | 計測データ（公共測量成果又は基本測量成果） |
| 2 | 計測データ（公共測量成果又は基本測量成果以外） |
| 3 | 生成データ |

## 4.23.4.1.3 PointCloudSpecAttribute_function.xml

**表 4-846**

| ファイル名 | PointCloudSpecAttribute_function.xml |
| --- | --- |
| ファイルURL | [https://www.geospatial.jp/iur/codelists/3.2/PointCloudSpecAttribute_function.xml](https://www.geospatial.jp/iur/codelists/3.2/PointCloudSpecAttribute_function.xml) |
| コード | 説明 |
| 1 | 航空レーザ計測 |
| 2 | 航空レーザ測深測量 |
| 3 | 高密度航空レーザ測量 |
| 4 | 車載写真レーザ測量 |
| 5 | 地上レーザ測量 |
| 6 | LidarSLAM計測 |
| 7 | 写真点群測量 |
| 8 | UAV写真点群測量 |
| 9 | UAVレーザ測量 |
| 10 | マルチビーム音響測深測量 |

## 4.23.4.1.4 PointCloudSpecAttribute_pointCloudAssociationMethod.xml

**表 4-847**

| ファイル名 | PointCloudSpecAttribute_pointCloudAssociationMethod.xml |
| --- | --- |
| ファイルURL | [https://www.geospatial.jp/iur/codelists/3.2/PointCloudSpecAttribute_pointCloudAssociationMethod.xml](https://www.geospatial.jp/iur/codelists/3.2/PointCloudSpecAttribute_pointCloudAssociationMethod.xml) |
| コード | 説明 |
| 1 | 対象地物の正射影の外周内に含まれる点群を対応付ける |
| 2 | 対象地物の正射影の外周をバッファした範囲内に含まれる点群を対応付ける |
| 3 | 点群分類後に対象地物の正射影の外周内に含まれる対象地物と同じ分類の点群を対応付ける |
| 4 | 点群分類後に対象地物の正射影の外周をバッファした範囲内に含まれる点群を対応付ける |
| 5 | 対象地物（立体）内に含まれる点群を対応付ける |
| 6 | 対象地物と点群を重ね、地物に対応する点群を手動で対応付ける |
| 7 | その他の手法 |

## 4.23.4.1.5 PointCloudSpecAttribute_pointSubsamplingInfo.xml

**表 4-848**

| ファイル名 | PointCloudSpecAttribute_pointSubsamplingInfo.xml |
| --- | --- |
| ファイルURL | [https://www.geospatial.jp/iur/codelists/3.2/PointCloudSpecAttribute_pointSubsamplingInfo.xml](https://www.geospatial.jp/iur/codelists/3.2/PointCloudSpecAttribute_pointSubsamplingInfo.xml) |
| コード | 説明 |
| 1 | Farthest Point Sampling (FPS) |
| 2 | Voxel Grid Filtering |
| 3 | Random Sampling (RS) |
| 4 | Poisson Disk Sampling (PDS) |
| 5 | 3D Edge-Preserving Sampling (3DEPS) |
| 6 | Inverse Density Importance Sub-Sampling (IDISS) |
| 7 | Minimum Distance Sampling |
| 99 | No Sub-Sampling |

## 4.23.4.1.6 PointCloudSpecAttribute_spectralBandSet.xml

**表 4-849**

| ファイル名 | PointCloudSpecAttribute_spectralBandSet.xml |
| --- | --- |
| ファイルURL | [https://www.geospatial.jp/iur/codelists/3.2/PointCloudSpecAttribute_spectralBandSet.xml](https://www.geospatial.jp/iur/codelists/3.2/PointCloudSpecAttribute_spectralBandSet.xml) |
| コード | 説明 |
| 1 | RGB |
| 2 | NIR |

## 4.23.4.1.7 PointCloudSpecAttribute_srcFilteringCriteria.xml

**表 4-850**

| ファイル名 | PointCloudSpecAttribute_srcFilteringCriteria.xml |
| --- | --- |
| ファイルURL | [https://www.geospatial.jp/iur/codelists/3.2/PointCloudSpecAttribute_srcFilteringCriteria.xml](https://www.geospatial.jp/iur/codelists/3.2/PointCloudSpecAttribute_srcFilteringCriteria.xml) |
| コード | 説明 |
| 1 | フィルタリングなし |
| 2 | ノイズ |
| 3 | 道路施設等（道路橋（長さ５ｍ以上）、高架橋、横断歩道橋、照明灯、信号灯、道路情報板等） |
| 4 | 鉄道施設（鉄道橋（長さ５ｍ以上）、高架橋（モノレールの高架橋含む。）、跨線橋、プラットホーム、プラットホーム上屋、架線支柱、信号灯支柱） |
| 5 | 建 物 及 び附属施設等（一般住宅、工場、倉庫、公共施設、駅舎、無壁舎、温室、ビニールハウス、競技場のスタンド、門、プール（土台部分含む。）、塀） |
| 6 | 小物体（記念碑、鳥居、貯水槽、肥料槽、給水塔、起重機、煙突、高塔、電波塔、灯台、灯標、輸送管（地上、空間）、送電線） |
| 7 | 水部に関する構造物（浮き桟橋、水位観測施設、河川表示板） |
| 8 | 植生（樹木、竹林、生垣） |
| 9 | その他（大規模な改変工事中の地域、地下鉄工事等の開削部、資材置場等の材料、資材） |
| 10 | 地表面以外 |

## 4.23.4.1.8 PointCloudSpecAttribute_srcScale.xml

**表 4-851**

| ファイル名 | PointCloudSpecAttribute_srcScale.xml |
| --- | --- |
| ファイルURL | [https://www.geospatial.jp/iur/codelists/3.2/PointCloudSpecAttribute_srcScale.xml](https://www.geospatial.jp/iur/codelists/3.2/PointCloudSpecAttribute_srcScale.xml) |
| コード | 説明 |
| 250 | 地図情報レベル250 |
| 500 | 地図情報レベル500 |
| 1000 | 地図情報レベル1000 |
| 2500 | 地図情報レベル2500 |
| 5000 | 地図情報レベル5000 |

