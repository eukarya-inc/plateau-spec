# 6.3.1 完全性

## 6.3.1 完全性

完全性とは、データ集合内の過剰なデータの存在（過剰）とデータ集合内のデータの欠落（漏れ）である。

**表 6-1**

| No | C01 |
| --- | --- |
| 品質要求 | データ製品内に、gml:idが同一となるインスタンスがない。 |
| 品質要素 | 完全性・過剰 |
| 品質適用範囲 | データ製品内の全てのgml:idをもつインスタンス。 |
| 品質評価尺度 | インスタンスに与えられたgml:idと同じgml:idをもつ他のインスタンスがデータ製品内に存在しない。 |
| 適合品質水準 | エラーの数が0個の場合に合格。エラーの数が1以上の場合は不合格。 |
| 品質評価手法 | 全数・自動検査を実施する。手順1．データ製品に含まれる全てのインスタンスについて、gml:idの値が同じインスタンスの数をエラーとして数える。 |

**表 6-2**

| No | C02：参照データに含まれるデータを分割・統合・追加・削除せずに使用する場合 |
| --- | --- |
| 品質要求 | 参照データとインスタンス数が等しい。 |
| 品質要素 | 完全性・過剰/漏れ |
| 品質適用範囲 | データ集合内の全ての地物型のインスタンス。 |
| 品質評価尺度 | 参照データと都市モデルに含まれる各地物のインスタンス数が等しい。 |
| 適合品質水準 | エラーの数が0個の場合に合格。エラーの数が1以上の場合は不合格。 |
| 品質評価手法 | 全数・自動検査を実施する。手順1．参照データに含まれるデータ数を、地物型ごとに数える。手順2．都市モデルに含まれるインスタンス数を地物型ごとに数える。手順3．手順1．と手順2．の結果より、地物型ごとに差を計算し、その絶対値の和をエラーの数とする。 |

**表 6-3**

| No | C03：参照データに含まれるデータを分割・統合・追加・削除し使用する場合、又は新規にデータを作成する場合 |
| --- | --- |
| 品質要求 | 参照データと比較して過剰・漏れが許容誤差の範囲内である。 |
| 品質要素 | 完全性・過剰/漏れ |
| 品質適用範囲 | データ集合内の全ての地物型のインスタンス。 |
| 品質評価尺度 | 参照データに存在しないのに地物インスタンスが存在する場合、あるいは参照データに存在するのに地物インスタンスが存在しない場合をエラーとする。1個以上のエラーが存在するサブメッシュをエラーサブメッシュとする。式：誤率（%） = (エラーサブメッシュの数 / 100) x 100 |
| 適合品質水準 | 全ての検査単位の誤率が10%以下なら合格、10%を超える検査単位が1つ以上あれば不合格。 |
| 品質評価手法 | 抜取・目視検査を実施する。手順1．抜取検査手法に従い、検査単位を抽出する。手順2．検査単位の各メッシュを5×5のサブメッシュに分割する。手順3．検査単位の範囲について、対象となる全ての地物インスタンスを抽出する。手順4．検査単位ごとに全サブメッシュについて、参照データと手順3．を目視で比較して、どちらかと対応が取れない地物インスタンスがあった場合、そのサブメッシュをエラーとして、エラーの存在するサブメッシュ数を数える。手順5．手順4．の結果より、検査単位ごとに誤率を算出する。 |

**表 6-4**

| No | C04（LODで指定された地物型の過剰） |
| --- | --- |
| 品質要求 | 応用スキーマごとに定義された、各LODにおいて使用可能な地物型以外のインスタンスが含まれていない。 |
| 品質要素 | 完全性・過剰 |
| 品質適用範囲 | データ集合内の全ての地物型のインスタンス。 |
| 品質評価尺度 | 応用スキーマごとに定義された、各LODにおいて使用可能な地物型以外のインスタンスが含まれている場合にエラーとする。 |
| 適合品質水準 | エラーの数が0個の場合に合格。エラーの数が1以上の場合は不合格。 |
| 品質評価手法 | 応用スキーマごとに全数・自動検査を実施する。手順1．データ製品に含まれる、全体となる地物型 a) のインスタンスがもつ空間属性のLOD（LODの詳細な区分が行われている場合には、その区分）を取得する。手順2．LOD又はLODの詳細な区分 b) において、標準製品仕様書に示された使用可能な地物型を取得する。手順3．データ製品に、手順2．で取得した地物型以外のインスタンスが存在した場合に、エラーとしてその数を数える。 |
|  | ← |

**表 6-5**

| No | C05（出力すべき主題属性及び関連役割の漏れ） |
| --- | --- |
| 品質要求 | 作成対象とする主題属性及び関連役割が、必ず要素（タグ）として出力される。 |
| 品質要素 | 完全性・漏れ |
| 品質適用範囲 | データ製品に含まれる、作成対象とする主題属性及び関連役割のうち、必ず出力すべき主題属性及び関連役割のインスタンス。 |
| 品質評価尺度 | 拡張製品仕様書が作成対象とする主題属性及び関連役割のうち、必ず出力すべきインスタンスの漏れ。 |
| 適合品質水準 | エラーの数が0個の場合に合格。エラーの数が1以上の場合は不合格。 |
| 品質評価手法 | 全数・自動検査を実施する。手順1．検査プログラムによって、各都市の拡張製品仕様書で作成対象とする主題属性及び関連役割のうち、必ず要素（タグ）として出現すべき主題属性及び関連役割が、都市オブジェクトの子要素として出現していない箇所をエラーとして数える。作成対象とする主題属性及び関連役割とは、取得項目一覧のA.3.1_取得項目一覧シートにおいて、I列「作成対象」の欄に「○」が付いている全ての主題属性及び関連役割である。必ず要素（タグ）として出現すべき主題属性及び関連役割とは、取得項目一覧のA.3.1_取得項目一覧シートにおいて、N列「不明な場合に不明値を出力する」の欄に「○」が付いている全ての主題属性及び関連役割である。作成対象とする主題属性及び関連役割（I列に「○」）のうち、出力すべき主題属性及び関連役割（N列に「○」）は、必ず要素（タグ）として出力しなければならない。 |

**表 6-6**

| No | C06（作成対象である主題属性及び関連役割の漏れ） |
| --- | --- |
| 品質要求 | 作成対象とする主題属性及び関連役割が、必ず要素（タグ）として1つ以上出力される。 |
| 品質要素 | 完全性・漏れ |
| 品質適用範囲 | 作成対象とする主題属性及び関連役割。 |
| 品質評価尺度 | 拡張製品仕様書で作成対象としている主題属性及び関連役割のインスタンスの漏れ。 |
| 適合品質水準 | エラーの数が0個の場合に合格。エラーの数が1以上の場合は不合格。 |
| 品質評価手法 | 全数・自動検査を実施する。手順1．検査プログラムによって、地物型ごとに各都市の拡張製品仕様書で作成対象とする主題属性及び関連役割が、都市オブジェクトの子要素として出現している箇所を数える。手順2．出現している箇所が0か所（データセットにインスタンスが存在しない）となる主題属性及び関連役割の数を数える。作成対象とする主題属性及び関連役割とは、取得項目一覧のA.3.1_取得項目一覧シートにおいて、I列「作成対象」の欄に「○」が付いている全ての主題属性及び関連役割である。 |

**表 6-7**

| No | C07（品質属性の漏れ） |
| --- | --- |
| 品質要求 | 全ての幾何オブジェクトについて、作成に使用した原典資料の種類が入力されている。 |
| 品質要素 | 完全性・漏れ |
| 品質適用範囲 | 全ての都市オブジェクト。 |
| 品質評価尺度 | 幾何オブジェクトの作成に使用する原典資料の種類の漏れ。 |
| 適合品質水準 | エラーの数が0個の場合に合格。エラーの数が1以上の場合は不合格。 |
| 品質評価手法 | 全数・自動検査を実施する。地物型毎、かつ、拡張製品仕様書　表4-1に示される、作成対象となるLODごとに実施する。手順1．品質属性（uro:DataQualityAttribute）のうち、あるLODの幾何オブジェクトが作成されているにもかかわらず、当該LODについての「幾何オブジェクトの作成に使用した原典資料の種類についての属性」が含まれていない場合にエラーとする。手順2．全ての地物型及び作成対象とする全てのLODに対して手順1．を実施し、エラーの数を合計する。「幾何オブジェクト作成するために使用した原典資料の種類についての属性」とは、以下である。 LOD0の場合：uro:geometrySrcDescLod0  LOD1の場合：uro:geometrySrcDescLod1  LOD2の場合：uro:geometrySrcDescLod2  LOD3の場合：uro:geometrySrcDescLod3  LOD4の場合：uro:geometrySrcDescLod4 |

**表 6-8**

| No | C08（公共測量品質属性の漏れ） |
| --- | --- |
| 品質要求 | 公共測量成果又は基本測量成果となる全ての幾何オブジェクトについて、作成に使用した公共測量成果又は基本測量成果の種類が入力されている。 |
| 品質要素 | 完全性・漏れ |
| 品質適用範囲 | 全ての都市オブジェクト。 |
| 品質評価尺度 | 幾何オブジェクトの作成に使用する公共測量成果又は基本測量成果の種類の漏れ。 |
| 適合品質水準 | エラーの数が0個の場合に合格。エラーの数が1以上の場合は不合格。 |
| 品質評価手法 | 全数・自動検査を実施する。地物型毎、かつ、拡張製品仕様書　表4-1に示される、作成対象となるLODごとに実施する。手順1．データセットに含まれる都市オブジェクトの品質属性（uro:DataQualityAttribute）について、各LODで「幾何オブジェクト作成するために使用した原典資料の種類についての属性」の値が「公共測量成果又は基本測量成果（コード「000」）」のみである属性の有無及びそのLODを特定する。手順2．手順1．で「公共測量成果又は基本測量成果（コード「000」）」のみとなる属性がある場合は、uro:DataQualityAttributeの子要素としてuro:PublicSurveyDataQualityAttributeが出現し、かつ、そのLODにおける「公共測量成果又は基本測量成果の地図情報レベルについての属性」及び「公共測量成果又は基本測量成果の種類についての属性」が入力されていない場合に、エラーとする。手順3．全ての地物型及び作成対象とする全てのLODに対して手順1．及び手順2．を実施し、エラーの数を合計する。「幾何オブジェクト作成するために使用した原典資料の種類についての属性」とは、以下である。 LOD0の場合：uro:geometrySrcDescLod0  LOD1の場合：uro:geometrySrcDescLod1  LOD2の場合：uro:geometrySrcDescLod2  LOD3の場合：uro:geometrySrcDescLod3  LOD4の場合：uro:geometrySrcDescLod4「公共測量成果又は基本測量成果の地図情報レベルについての属性」とは、以下である。 LOD0の場合：uro:srcScaleLod0  LOD1の場合：uro:srcScaleLod1  LOD2の場合：uro:srcScaleLod2  LOD3の場合：uro:srcScaleLod3  LOD4の場合：uro:srcScaleLod4「公共測量成果又は基本測量成果の種類についての属性」とは、以下である。 LOD0の場合：uro:publicSurveySrcDescLod0  LOD1の場合：uro:publicSurveySrcDescLod1  LOD2の場合：uro:publicSurveySrcDescLod2  LOD3の場合：uro:publicSurveySrcDescLod3  LOD4の場合：uro:publicSurveySrcDescLod4 |

**表 6-9**

| No | C-bldg-01 |
| --- | --- |
| 品質要素 | 完全性・過剰 |
| 品質適用範囲 | bldg:Building |
| 品質評価尺度 | データ製品内に、属性「uro:buildingID」が同一となるインスタンスがない。 |
| 適合品質水準 | エラーの数が0個の場合に合格。エラーの数が1以上の場合は不合格。 |
| 品質評価手法 | 全数・自動検査を実施する。手順1．データ製品に含まれる全ての建築物インスタンスについて、属性「uro:buildingID」の値が同一となるインスタンスを抽出する。手順2．同一の属性「uro:buildingID」の値をもつインスタンス群について、属性「uro:branchID」又は「uro:partID」をもたないインスタンスが複数存在した場合に、エラーとしてその数を数える。 |

**表 6-10**

| No | C-bldg-02 （建築物と部屋の完全性） |
| --- | --- |
| 品質要求 | 参照データとインスタンス数が等しい。 |
| 品質要素 | 完全性・過剰/漏れ |
| 品質適用範囲 | LOD4の幾何オブジェクトをもつbldg:Building,bldg:Room |
| 品質評価尺度 | 参照データに含まれるIfcBuilding及びIfcSpaceのインスタンス数と、建築物モデル（LOD4）に含まれるbldg:Building及びbldg:Roomのインスタンス数が等しい。 |
| 適合品質水準 | エラーの数が0個の場合に合格。エラーの数が1以上の場合は不合格。 |
| 品質評価手法 | 全数・自動検査を実施する。手順1．参照データに含まれる、IfcBuilding及びIfcSpaceのインスタンス数を数える。手順2．建築物モデル（LOD4）に含まれるbldg:Building及びbldg:Roomのインスタンス数を数える。手順3．手順1．と手順2．の結果より、IfcBuildingとbldg:Building、IfcSpaceとbldg:Room、それぞれのインスタンス数の差分を求め、その絶対値の和をエラーの数とする。 |

**表 6-11**

| No | C-bldg-03（LOD4における開口部の完全性） |
| --- | --- |
| 品質要求 | 参照データとの一致。 |
| 品質要素 | 完全性・過剰 |
| 品質適用範囲 | bldg:Door,bldg:Window |
| 品質評価尺度 | 建築物モデル（LOD4）に含まれるbldg:Window及びbldg:Doorと、参照データに含まれる開口部（窓、ドア）のインスタンス数が等しい。 |
| 適合品質水準 | エラーの数が0個の場合に合格。エラーの数が1以上の場合は不合格。 |
| 品質評価手法 | 抜取・目視検査を実施する。手順1．建築物モデル（LOD4）に含まれる、bldg:Door及びbldg:Windowの全インスタンスの2%となるまで抽出する。手順2．参照データを表示し、抽出したbldg:Door及びbldg:Windowに対応する開口部（窓、ドア）のインスタンスが存在するか、目視で確認する。手順3．対応するインスタンスが存在しない場合にエラーとする。 |

**表 6-12**

| No | C-bldg-04（LOD4.1及びLOD4.2における付属物の過剰） |
| --- | --- |
| 品質要求 | 参照データとの一致。 |
| 品質要素 | 完全性・過剰 |
| 品質適用範囲 | bldg:IntBuildingInstallation |
| 品質評価尺度 | 参照データに含まれる内部付属物と建築物モデル（LOD4）に含まれるbldg:IntBuildingInstallationのインスタンス数が等しい。 |
| 適合品質水準 | エラーの数が0個の場合に合格。エラーの数が1以上の場合は不合格。 |
| 品質評価手法 | 抜取・目視検査を実施する。手順1．建築物モデル（LOD4）に含まれるbldg:IntBuildingInstallationの全インスタンスの2%の数となるまでbldg:IntBuildingInstallationを抽出する。手順2．参照データを表示し、抽出したbldg:IntBuildingInstallationに対応する内部付属物が存在し、その種類が一致するかを目視で確認する。手順3．対応する内部付属物が存在しない場合、又は存在していても種類が不一致となる場合にエラーとする。 |
| 注記6.3.1の注記内部付属物について IntBuildingInstallationとすべき内部付属物は、「（別冊）3D都市モデルとの連携のための情報伝達マニュアル（IDM）・モデルビュー定義（MVD）第3.0版　IFCクラスとPLATEAU標準建築物モデル（LOD4）の対応表」により、確認できる。 | ← |

全体となる地物型とは、以下をいう。
 bldg:Building,brid:Bridge,frn:CityFurniture,luse:LandUse,tran:Road,tran:Railway,tran:Track,tran:Square,tun:Tunnel,veg:SolitaryVegetationObject,veg:PlantCover,wtr:WaterBody,dem:ReliefFeature,uro:OtherConstruction,uro:UndergroundBuilding,uro:UtilityNetworkElementを継承する都市オブジェクト,uro:Waterway,urf:Zone及びこれを継承する地物型。

LOD又はLODの詳細な区分ごとに仕様可能な地物型は、標準製品仕様書の4.2～4.21に、応用スキーマごとに示す。

